var app_id=window.algolia_app_id,api_key=window.algolia_api_key,sugg_index_name=window.algolia_suffix+"_query_suggestions",aa_master_code=window.default_vertical_city_code;localStorage.getItem("jio_region_codes")&&(aa_master_code=JSON.parse(localStorage.getItem("jio_region_codes")));let searchClient=algoliasearch(app_id,api_key);var aa_region_filter="",aa_cat_filter="",aa_available_filter="";for(var vertical in aa_master_code)if(aa_master_code[vertical]&&"1"==window.autocomplete_inventory)for(let k in aa_master_code[vertical]){var code=aa_master_code[vertical][k];aa_available_filter+="available_stores:"+code+" OR "}let aa_mstar_vertical_code=JSON.parse(localStorage.getItem("jio_vertical_city_code"));for(var vertical in aa_mstar_vertical_code)if(aa_mstar_vertical_code[vertical]);else{var cat_name=vertical.toLowerCase();aa_cat_filter+="NOT category_level.level1:"+(cat_name=cat_name.charAt(0).toUpperCase()+cat_name.slice(1))+" AND "}""!=aa_cat_filter&&(aa_cat_filter=aa_cat_filter.slice(0,-5),aa_region_filter+="("+aa_cat_filter+")"),""!=aa_cat_filter&&""!=aa_available_filter&&(aa_region_filter+=" AND "),""!=aa_available_filter&&(aa_available_filter=aa_available_filter.slice(0,-4),aa_region_filter+="("+aa_available_filter+")");var aa_src=["web",localStorage.getItem("nms_mgo_pincode")];for(var vertical in aa_master_code)if(null!=aa_master_code[vertical])for(let k in aa_master_code[vertical])aa_src.push(aa_master_code[vertical][k]);var catalogsearch_url="";catalogsearch_url="plp"==page_type?"catalogsearch/result_plp":"catalogsearch/result";const{autocomplete:autocomplete,getAlgoliaResults:getAlgoliaResults}=window["@algolia/autocomplete-js"];function pickMostPopularCategory(hit){let categories=Object.values(hit).filter(maybeIndex=>maybeIndex.facets&&maybeIndex.facets.exact_matches&&maybeIndex.facets.exact_matches["category_level.level1"]&&maybeIndex.facets.exact_matches["category_level.level1"].length>0).map(index=>index.facets.exact_matches["category_level.level1"][0]);var unique={};categories=categories.filter((function(currentObject){return!(currentObject.value in unique)&&(unique[currentObject.value]=!0,!0)})),categories.sort((function(a,b){return b.count-a.count}));var cat_arr=[];for(let category of categories)cat_arr.push(category.value);return cat_arr}autocomplete({container:"#autocomplete",placeholder:"Search essentials, groceries, and more â€¦",debug:!1,detachedMediaQuery:"none",classNames:{input:"input-text"},onSubmit({state:state}){if(state.query&&""!=state.query){var aa_query=state.query;let aa_ind_name=window.algolia_suffix+"_master_vertical",aa_href="/"+catalogsearch_url+"?q="+aa_query+"&in="+aa_ind_name;window.location.href=aa_href}},onStateChange({state:state}){state.isOpen&&1==state.isOpen?($(".aa-Panel").length>0&&$(".aa-Panel").detach().appendTo(".search-section"),$("body").addClass("autocomplete-open"),$(".aa-Panel").css("display","block")):($("body").removeClass("autocomplete-open"),$(".aa-Panel").css("display","none"))},getSources:({query:query})=>[{sourceId:"suggestions",getItems:({query:query})=>getAlgoliaResults({searchClient:searchClient,queries:[{indexName:sugg_index_name,query:query,params:{hitsPerPage:10,clickAnalytics:!0,filters:aa_region_filter,analyticsTags:aa_src}}]}),templates:{item({item:item,components:components,html:html}){let id=item.__autocomplete_id,queryId=item.__autocomplete_queryID,ind_name=window.algolia_suffix+"_master_vertical",href="/"+catalogsearch_url+"?q="+item.query+"&in="+ind_name,ver_html="";return id<3&&(categories=pickMostPopularCategory(item),categories.length>0&&(0==id?(ver_html='<div class="autocomplete-searchlist"><small class="autocomplete-in"> in </small>',ver_html+=`<div class="aa-vert-box aa-vert-box-active">\n                                    <a href="${href}">All</a>\n                                </div>`,categories.map((category,index)=>{let vertical="";vertical="Sports, Toys & Luggage"==category?category.replace(/[^\w\s]/gi,"").replace(/ /g,"").replace(/&/g,"and"):category.replace(/ /g,"").replace(/&/g,"and");let index_name=window.algolia_suffix+"_"+vertical.toLowerCase(),href="/catalogsearch/result?q="+item.query+"&in="+index_name;ver_html+=`<div class="aa-vert-box">\n                                        <a href="${href}">${category}</a>\n                                    </div>`}),ver_html+="</div>"):(ver_html='<span class="autocomplete-in"> in ',categories.map((category,index)=>{let vertical=category.replace(/ /g,"").replace(/&/g,"and"),index_name=window.algolia_suffix+"_"+vertical.toLowerCase(),href="/catalogsearch/result?q="+item.query+"&in="+index_name;ver_html+=`<a class="ac-vertical" href="${href}">${category}</a>`}),ver_html+="</span>"))),html`
                    <div class="product-item-info auto-suggestion" data-queryid="${queryId}" data-id="${id}">
                        <div class="autocomplete-list">
                            <a href="${href}">
                                <div class="auto_search_icon"></div>
                                <div class="search-text">
                                    <span>
                                    ${components.Highlight({hit:item,attribute:"query",tagName:"em"})}
                                    </span>
                                    ${html([ver_html])}
                                </div>
                            </a>
                        </div>
                    </div>`}}}]});