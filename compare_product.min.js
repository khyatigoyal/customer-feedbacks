function uniqueValue(arr){for(var a=[],i=0,l=arr.length;i<l;i++)-1===a.indexOf(arr[i])&&""!==arr[i]&&a.push(arr[i]);return a}function RemoveNode(data,id){return!!data&&data.filter((function(emp){return emp.id!=id}))}function CompareError(error,product=""){var compareData=localStorage.getItem("compareData"),getproducts="";null!=compareData&&""!=compareData&&null!=(getproducts=productFetch(compareData))&&""!=getproducts&&$.ajax({url:window.location.origin+"/catalog/compare/request",type:"GET",dataType:"HTML",headers:{error:error},data:{ids:getproducts,product:product},success:function(response){null!=response&&($("#newcompare_request .modal-content").html(""),$("#newcompare_request .modal-content").html(response),$("#newcompare_request").modal("show"))},error:function(error){$("#newcompare_request .modal-content").html(""),$("#newcompare_request .modal-content").html("<p>No Products Available For Compare</p>")}})}function productFetch(data){var newdata="",compareData;data&&JSON.parse(data).filter((function(emp){""!=emp.id&&(newdata+=""==newdata?emp.id:","+emp.id)}));return""!=newdata?newdata:null}$(document).ready((function(e){var compare_this=$("#compare_this").attr("data-product"),already_exists=!1,compare_category=$("#compare_this").attr("data-category"),compareData=localStorage.getItem("compareData");if(""!=compare_this&&""!=compare_category&&null!=compareData&&""!=compareData){var compare_products=JSON.parse(compareData);if(compare_products.length>0)for(var i=0;i<compare_products.length;i++)compare_products[i].id==compare_this&&compare_products[i].category==compare_category&&(already_exists=!0)}1==already_exists?($("#compare_prod_btn").addClass("active"),$("#compare_prod_btn .iconText").text("Go To Compare")):($("#compare_prod_btn").hasClass("active")&&$("#compare_prod_btn").removeClass("active"),$("#compare_prod_btn .iconText").text("Add To Compare")),$("#compare_prod_btn").on("click",(function(){var compare_this=$("#compare_this").attr("data-product"),compare_category=$("#compare_this").attr("data-category"),sameCategory=!1,compareData=localStorage.getItem("compareData"),exist_compare=[],overall_products="",overall_category=[],product_count=0;null!=compareData&&""!=compareData&&(exist_compare=JSON.parse(compareData));var already_exists=!1;if(null!=compare_this&&null!=compare_category&&""!=compare_this&&""!=compare_category){var newObject={id:compare_this,category:compare_category},compare_products;if(null!=compareData&&""!=compareData)if(product_count=(compare_products=JSON.parse(compareData)).length,compare_products.length>0)for(var i=0;i<compare_products.length;i++)compare_products[i]&&(compare_products[i].id&&compare_products[i].category&&compare_products[i].id==compare_this&&compare_products[i].category==compare_category&&(already_exists=!0),compare_products[i].category==compare_category&&(sameCategory=!0))}if(product_count>0&&0==sameCategory)return localStorage.removeItem("compareData"),$("#compare_prod_btn").trigger("click"),!1;if($(this).hasClass("active")){var newDataCompare=localStorage.getItem("compareData"),overall_category;if(null!=compare_this&&null!=compare_category&&""!=compare_this&&""!=compare_category){var newObject={id:compare_this,category:compare_category},compare_products;if(null!=newDataCompare&&""!=newDataCompare)if(product_count=(compare_products=JSON.parse(newDataCompare)).length,compare_products.length>0)for(var i=0;i<compare_products.length;i++)compare_products[i]&&(null!=compare_products[i].id&&""!=compare_products[i].id&&(overall_products+=0==i?compare_products[i].id:","+compare_products[i].id),null!=compare_products[i].category&&""!=compare_products[i].category&&(overall_category[i]=compare_products[i].category))}if(""!=overall_products)if(overall_category)if(1==(overall_category=uniqueValue(overall_category)).length&&overall_category[0]){var dataURL=window.location.origin+"/compare/"+overall_category[0]+"/?ids="+overall_products;window.location.href=dataURL}}else if(product_count>=4)return $("#compare_prod_btn").hasClass("active")&&$("#compare_prod_btn").removeClass("active"),CompareError("<p>Only four products can be compared at a time. Please select any 4 products from the list to continue.</p>",compare_this),!1;0==already_exists&&($(this).hasClass("active")?($("#compare_prod_btn .iconText").text("Add To Compare"),$("#compare_prod_btn").hasClass("active")&&$("#compare_prod_btn").removeClass("active")):newObject&&exist_compare&&(exist_compare.push(newObject),localStorage.setItem("compareData",JSON.stringify(exist_compare)),$("#compare_prod_btn .iconText").text("Go To Compare"),$(this).addClass("active"),notify("Added to Compare","success")))})),$(document).on("click",".clearCompare",(function(){var compareData=localStorage.getItem("compareData");null!=compareData&&""!=compareData&&(localStorage.removeItem("compareData"),$(".nmsalert").length>0&&$(".close.btcls").trigger("click"),$("#compare_prod_btn .iconText").text("Add To Compare"),$("#compare_prod_btn").hasClass("active")&&$("#compare_prod_btn").removeClass("active"))}))})),$(document).on("click",".removeCompare",(function(e){var overall_category=[],compareData=localStorage.getItem("compareData");null!=compareData&&""!=compareData&&($("input:checkbox[class=request_check]:checked").each((function(index,elem){var value="",productDiv=$(elem).attr("data-class");if($("."+productDiv).remove(),""!=(value=$(elem).attr("value"))&&null!=value){var newcompareData=RemoveNode(JSON.parse(compareData),value);newcompareData.length>0?localStorage.setItem("compareData",JSON.stringify(newcompareData)):localStorage.removeItem("compareData"),$('.compare_this[data-product="'+value+'"]').prop("checked",!1)}})),0==$(".compare_request .product-details").length&&(localStorage.removeItem("compareData"),$("#newcompare_request .modal-content").html(""),$("#newcompare_request .modal-content").html("<p>No Products Available For Compare</p>")));var Comparecount=localStorage.getItem("compareData");if(null!=Comparecount&&""!=Comparecount){var dataCount=JSON.parse(Comparecount);dataCount.length>0?$("#compare_prod_btn .compare_count").text(dataCount.length).show():$("#compare_prod_btn .compare_count").text("").hide()}else $("#compare_prod_btn .compare_count").text("").hide()})),$(document).on("click",".compare_now",(function(e){if(!($("input:checkbox[class=request_check]:checked").length>0&&$("input:checkbox[class=request_check]:checked").length<5))return $(".popup-subheader").css({"font-weight":"bolder"}),!1;$(".popup-subheader").css({"font-weight":"normal"}),$("#newcompare_request .close").trigger("click");var compareData=localStorage.getItem("compareData"),sameCategory=!1,product_count=0,newalreadyExists=!1;null!=compareData&&""!=compareData&&$("input:checkbox[class=request_check]").each((function(index,elem){var value="",compare_this=$(elem).attr("value"),compare_category=$(elem).attr("data-cateid"),productDiv=$(elem).attr("data-class"),already_exists=!1;if($(elem).is(":checked")){var exist_compare=[];if(null!=compare_this&&null!=compare_category&&""!=compare_this&&""!=compare_category){var newObject={id:compare_this,category:compare_category};if(null!=compareData&&""!=compareData){var compare_products=JSON.parse(compareData);if(product_count=compare_products.length,compare_products.length>0)for(var i=0;i<compare_products.length;i++)compare_products[i]&&compare_products[i].id&&compare_products[i].category&&compare_products[i].id==compare_this&&compare_products[i].category==compare_category&&(already_exists=!0)}}product_count<5&&0==already_exists&&(exist_compare=JSON.parse(localStorage.getItem("compareData")),newObject&&exist_compare&&(exist_compare.push(newObject),localStorage.setItem("compareData",JSON.stringify(exist_compare))))}else if(""!=compare_this&&null!=compare_this){var exist_compare=[],newData=RemoveNode(exist_compare=JSON.parse(localStorage.getItem("compareData")),compare_this);localStorage.setItem("compareData",JSON.stringify(newData))}}));var overall_products="",overall_category=[],newDataCompare=localStorage.getItem("compareData"),overall_category;if(null!=newDataCompare&&""!=newDataCompare){var compare_products=JSON.parse(newDataCompare);if(product_count=compare_products.length,compare_products.length>0)for(var i=0;i<compare_products.length;i++)if(compare_products[i]){if(null!=compare_products[i].id&&""!=compare_products[i].id&&(overall_products+=0==i?compare_products[i].id:","+compare_products[i].id,$("body").hasClass("catalog-product-view"))){var productCompare=$("#compare_this").attr("data-product");null!=productCompare&&""!=productCompare&&compare_products[i].id==productCompare&&(newalreadyExists=!0)}null!=compare_products[i].category&&""!=compare_products[i].category&&(overall_category[i]=compare_products[i].category)}}if((1==newalreadyExists?$("body").hasClass("catalog-product-view")&&($("#compare_prod_btn").hasClass("active")||($("#compare_prod_btn").addClass("active"),$("#compare_prod_btn .iconText").text("Go To Compare"))):$("body").hasClass("catalog-product-view")&&($("#compare_prod_btn").hasClass("active")&&$("#compare_prod_btn").removeClass("active"),$("#compare_prod_btn .iconText").text("Add To Compare")),""!=overall_products)&&(overall_category&&1==(overall_category=uniqueValue(overall_category)).length&&overall_category[0])){var dataURL=window.location.origin+"/compare/"+overall_category[0]+"/?ids="+overall_products;window.location.href=dataURL}})),$(document).on("click","#compare_products_popup .close",(function(){$("#compare_popup").text("")}));