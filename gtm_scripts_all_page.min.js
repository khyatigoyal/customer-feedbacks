function AllPagePurelyGtmEvents(event="",category="",action="",label="",product_ID="",rating="",pincode=""){var gtmStatus;if("1"==document.getElementById("gtm_status").value){if(""==pincode)var pincode=null!=localStorage.getItem("nms_mgo_pincode")?localStorage.getItem("nms_mgo_pincode"):"NA";"undefined"!=typeof journeyDataLayer&&journeyDataLayer();var page_type=getAllGtmPageType(),platform="website";$("body").hasClass("nms-mobistore")&&(platform="msite"),null!=localStorage.getItem("jio_app_os")&&null!=localStorage.getItem("jio_app_os")&&(platform="app_"+localStorage.getItem("jio_app_os"));var userID=null!=localStorage.getItem("userid")&&"0"!=localStorage.getItem("userid")?localStorage.getItem("userid"):"",login_status=null!=localStorage.getItem("userid")&&"0"!=localStorage.getItem("userid")?"logged in":"not logged in";""!=product_ID?dataLayer.push({event:event,journey:window.journeyData,category:category,action:action,label:label,pincode:pincode,page_type:page_type,platform:platform,rating:rating,"user ID":userID,login_status:login_status,"product _ID":product_ID}):dataLayer.push({event:event,journey:window.journeyData,category:category,action:action,label:label,pincode:pincode,page_type:page_type,platform:platform,"user ID":userID,login_status:login_status})}}function NewSearchPurelyGtmEvents(page="",event="",category="",action="",label="",search_term="",suggestive_search_count="",suggestive_search_term_clicked="",suggestive_search_term_index=""){var gtmStatus;if("1"==document.getElementById("gtm_status").value){var pincode=null!=localStorage.getItem("nms_mgo_pincode")?localStorage.getItem("nms_mgo_pincode"):"NA",page_type=getAllGtmPageType();"undefined"!=typeof journeyDataLayer&&journeyDataLayer();var platform="website";$("body").hasClass("nms-mobistore")&&(platform="msite"),null!=localStorage.getItem("jio_app_os")&&null!=localStorage.getItem("jio_app_os")&&(platform="app_"+localStorage.getItem("jio_app_os"));var userID=null!=localStorage.getItem("userid")&&"0"!=localStorage.getItem("userid")?localStorage.getItem("userid"):"",login_status=null!=localStorage.getItem("userid")&&"0"!=localStorage.getItem("userid")?"logged in":"not logged in";dataLayer.push({event:event,page:page,journey:window.journeyData,category:category,action:action,label:label,search_term:search_term,suggestive_search_count:suggestive_search_count,suggestive_search_term_clicked:suggestive_search_term_clicked,suggestive_search_term_index:suggestive_search_term_index,pincode:pincode,page_type:page_type,platform:platform,"user ID":userID,login_status:login_status})}}function SearchPurelyGtmEvents(event="",category="",action="",label="",search_term="",suggestive_search_count="",suggestive_search_term_clicked="",suggestive_search_term_index=""){var gtmStatus;if("1"==document.getElementById("gtm_status").value){var pincode=null!=localStorage.getItem("nms_mgo_pincode")?localStorage.getItem("nms_mgo_pincode"):"NA",page_type=getAllGtmPageType();"undefined"!=typeof journeyDataLayer&&journeyDataLayer();var platform="website";$("body").hasClass("nms-mobistore")&&(platform="msite"),null!=localStorage.getItem("jio_app_os")&&null!=localStorage.getItem("jio_app_os")&&(platform="app_"+localStorage.getItem("jio_app_os"));var userID=null!=localStorage.getItem("userid")&&"0"!=localStorage.getItem("userid")?localStorage.getItem("userid"):"",login_status=null!=localStorage.getItem("userid")&&"0"!=localStorage.getItem("userid")?"logged in":"not logged in";dataLayer.push({event:event,journey:window.journeyData,category:category,action:action,label:label,search_term:search_term,suggestive_search_count:suggestive_search_count,suggestive_search_term_clicked:suggestive_search_term_clicked,suggestive_search_term_index:suggestive_search_term_index,pincode:pincode,page_type:page_type,platform:platform,"user ID":userID,login_status:login_status})}}function getAllGtmPageType(){var pageType="other pages",vertical="";if($("body").hasClass("cms-home"))pageType="home page";else if($("body").hasClass("gift-page"))pageType="gift store page";else if($("body").hasClass("otc-list-page")){var cateUrl,cateLevel;if(window.location.pathname.indexOf("/c/bestdeals")>-1)vertical=(cateLevel=(cateUrl=window.location.pathname.split("/")).length)>0?"bestdeals_"+cateUrl[cateLevel-2]+"_"+cateUrl[cateLevel-1]:"bestdeals_"+cateUrl[2];else if(window.location.pathname.indexOf("/c/")>-1||window.location.pathname.indexOf("/b/")>-1||window.location.pathname.indexOf("/m/")>-1){var cateUrl,cateLevel;vertical=(cateLevel=(cateUrl=window.location.pathname.split("/")).length)>0?cateUrl[cateLevel-2]+"_"+cateUrl[cateLevel-1]:cateUrl[2]}else $("body").hasClass("top-deals-list")&&$("#actionField").length>0&&""!=$("#actionField").val()&&null!=$("#actionField").val()&&(vertical=$("#actionField").val().toLowerCase().replace(" ","_"));pageType="plp_"+vertical}else if($("body").hasClass("otc-product-page")){var prodUrl=window.location.pathname;prodUrl.indexOf("/p/")>-1&&(vertical=prodUrl.split("/")[2]),pageType="pdp_"+vertical}else if($("body").hasClass("search-result-page"))pageType="plp_search";else if($("body").hasClass("top-deals-list")){var cateUrl,cateLevel;if(pageType="pdp_topdeals",window.location.pathname.indexOf("/c/")>-1)vertical=(cateLevel=(cateUrl=window.location.pathname.split("/")).length)>0?"bestdeals_"+cateUrl[cateLevel-2]:"bestdeals_"+cateUrl[2];else $("#actionField").length>0&&""!=$("#actionField").val()&&null!=$("#actionField").val()&&(vertical=$("#actionField").val().toLowerCase().replace(" ","_"));""!=vertical&&(pageType="pdp_"+vertical)}else if($("body").hasClass("need-support"))pageType="faqs";else if($("body").hasClass("offers-index-page"))pageType="offers page";else if($("body").hasClass("new-all-cat"))pageType="all categories page";else if($("body").hasClass("cms-groceries")||$("body").hasClass("cms-fashion")||$("body").hasClass("cms-beauty")||$("body").hasClass("cms-electronics")){var cateUrl,cateLevel;pageType="category home page_",(cateLevel=(cateUrl=window.location.pathname.split("/")).length)>0&&cateLevel<3&&(pageType="category home page_"+cateUrl[1].toLowerCase())}return pageType}$(document).on("click tap",(function(e){var gtmStatus;if("1"==document.getElementById("gtm_status").value){var event="",category="",action="",label="",product_ID="",rating="",pincode="",search_term="",suggestive_search_count="",site_search_results_count="",suggestive_search_term_clicked="",suggestive_search_term_index="",innerText;if(($("body").hasClass("otc-list-page")||$("body").hasClass("search-result-page")||$("body").hasClass("top-deals-list"))&&(event="event_plp_action",category="plp"),$("body").hasClass("otc-product-page")&&(event="event_pdp_action",category="pdp"),($("body").hasClass("need-support")||$("body").hasClass("cms-faqs"))&&(event="event_customer_service_action",category="faqs"),$("body").hasClass("cms-home")&&(event="event_home_page",category="top main category"),$("body").hasClass("new-all-cat")&&(event="event_shop_by_category",category="shop by category"),$(".top-section").find(e.target).length>0&&(event="event_all_pages",category="header"),$(".search-section").find(e.target).length>0&&(event="event_site_search",category="site search"),""!=e.target.className&&(($(".mini-cart").find(e.target).length>0||e.target.className.indexOf("cart_text")>-1)&&(action="cart clicked",label="header_cart_clicked"),e.target.className.indexOf("menu_section")>-1&&$("#mySidenav").length>0&&parseInt($("#mySidenav").css("width"),10)<1&&(action="hamburger clicked",label="header_hamburger_clicked"),(e.target.className.indexOf("menu_icon")>-1||e.target.className.indexOf("back-icon")>-1)&&(event="event_all_pages",category="header",action="back clicked",label="header_back_clicked"),$(".saved_location_swiper").find(e.target).length>0&&void 0!==e.originalEvent&&(event="event_all_pages",category="header",pincode=$(e.target).closest(".swiper-slide").attr("data-pin"),action="address clicked",label=$($(".saved_location_swiper").find(".swiper-slide")).index($(e.target).closest(".swiper-slide"))+1),e.target.className.indexOf("detect_location")>-1&&(event="event_all_pages",category="header",action="detect my location clicked",label="header_detect_my_location_clicked"),e.target.className.indexOf("rslt_icon")>-1&&(null!=e.target.innerText&&""!=e.target.innerText&&null!=e.target.innerText&&(search_term=e.target.innerText),action="recent searches clicked",label="site_search_recent_searches_clicked"),e.target.className.indexOf("qrcode-text-btn")>-1&&(action="search by scan clicked",label="site_search_search_by_scan_clicked"),e.target.className.indexOf("aa-Input")>-1&&"input"==e.target.tagName.toLowerCase()&&(action="search box clicked",label="site_search_search_box_clicked")),""!=e.target.id){if(e.target.id.indexOf("clear_recent_search")>-1&&e.target.id){event="event_site_search",category="site search",action="recent searches cleared",label="site_search_recent_searches_cleared";var recentCount=0;$(".search-block ul#recent_search_list li").length>0&&(recentCount=$(".search-block ul#recent_search_list li").length),search_term="clear all_"+recentCount+"keywords"}e.target.id.indexOf("rel_search_list_btn")>-1&&e.target.id&&(event="event_site_search",category="site search",action="Bulk list clicked",label="site_search_bulk_list_clicked")}if($("#mySidenav .hmenu_content ul li").find(e.target).length>0&&"a"===e.target.tagName.toLowerCase()){event="event_hamburger_menu_action",category="hamburger option selected";var menuText="";null!=e.target.innerText&&""!=e.target.innerText&&null!=e.target.innerText&&(menuText=e.target.innerText),""!=menuText&&(action=menuText.toLowerCase(),label="hamburger_"+menuText.toLowerCase().trim().replace(" ","_"))}if($(".top-section .logged").find(e.target).length>0&&e.target&&(action="profile clicked",label="header_profile_clicked"),$("#delivery_details").find(e.target).length>0&&(action="deliver to clicked",label="header_deliver_to_clicked"),$(".new-all-cat .all-cats-list .child_accordion .cat_details").find(e.target).length>0&&""!=e.target.innerText){var categoryLO="";if(""!=(categoryLO=$(e.target).attr("data-category"))){var innerText=e.target.innerText.toLowerCase();action="shop by category clicked",label=categoryLO.toLowerCase()+"_"+innerText}}if($(".new-all-cat .all-cats-list li").find(e.target).length>0&&""!=e.target.innerText){var categoryLO="",categoryL1="";if(categoryLO=$(e.target).attr("data-category"),categoryL1=$(e.target).attr("data-subcategory"),""!=categoryLO&&""!=categoryL1){var innerText=e.target.innerText.toLowerCase();action="shop by category clicked",label=categoryLO.toLowerCase()+"_"+categoryL1.toLowerCase()+"_"+innerText}}if($(".aa-Panel .aa-List").find(e.target).length>0)if($(e.target).closest(".product-item-info").find(".search-text").text().length>0)action="auto suggestion selected",label="site_search_auto_suggestion_selected",search_term=innerText=$(e.target).closest(".product-item-info").find(".search-text").text().toLowerCase(),suggestive_search_count=$(".aa-Source .auto-suggestion").length,suggestive_search_term_index=$($(".aa-Source .auto-suggestion").find(".autocomplete-list")).index($(e.target).closest(".autocomplete-list"))+1;$(".block-search .search-section .qr-code").find(e.target).length>0&&(action="search by scan clicked",label="site_search_search_by_scan_clicked"),""!=event&&""!=category&&""!=label&&("event_site_search"!=event?AllPagePurelyGtmEvents(event,category,action,label,"","",pincode):SearchPurelyGtmEvents(event,category,action,label,search_term,suggestive_search_count,"",suggestive_search_term_index))}})),$(document).ready((function(){var event="",category="",action="",label="",product_ID="",rating="",search_term="",suggestive_search_count="",site_search_results_count="",suggestive_search_term_clicked="",suggestive_search_term_index="";($("body").hasClass("otc-list-page")||$("body").hasClass("search-result-page"))&&(event="event_plp_action",category="plp"),$("body").hasClass("otc-product-page")&&(event="event_pdp_action",category="pdp"),($("body").hasClass("need-support")||$("body").hasClass("cms-faqs"))&&(event="event_customer_service_action",category="faqs"),$("body").hasClass("cms-home")&&(event="event_home_page",category="top main category"),$(".aa-Form").submit((function(e){event="event_site_search",category="site search",action="search query typed",label="site_search_search_query_entered",search_term=$(".aa-Input").val(),suggestive_search_count=$(".aa-List .autocomplete-list").length,""!=event&&""!=category&&""!=label&&SearchPurelyGtmEvents(event,category,action,label,search_term,suggestive_search_count,"","")})),$("#rel_search_form").submit((function(e){$("#rel_search_val").length>0&&null!=$("#rel_search_val").val()&&null!=$("#rel_search_val").val()&&""!=$("#rel_search_val").val()&&(search_term=$("#rel_search_val").val(),category="site search",action="Bulk list searched",label="site_search_searched_with_bulklist",""!=(event="event_site_search")&&""!=category&&""!=label&&SearchPurelyGtmEvents(event,category,action,label,search_term,"","",""))})),$("#avail_offers_dialog").on("shown.bs.modal",(function(e){event="event_pdp_action",category="pdp",action="view offers",label="view_offers_clicked",product_ID=null!=$("#alt_sku").val()&&null!=$("#alt_sku").val()&&""!=$("#alt_sku").val()?$("#alt_sku").val():"",""!=event&&""!=category&&""!=label&&""!=product_ID&&AllPagePurelyGtmEvents(event,category,action,label,product_ID)}))}));