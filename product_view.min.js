var domain_url=window.location.origin+"/";function get_debit_card_emi(){var phone_no="";if(localStorage.getItem("authtoken")&&"0"!=localStorage.getItem("userid")&&null!=localStorage.getItem("userid")){var authtoken=localStorage.getItem("authtoken"),userid=localStorage.getItem("userid"),mstar_url,get_user_api=$("#mstar_api_baseurl").val()+"entity/customer/get_details";$.ajax({url:get_user_api,data:{},headers:{userid:userid,authtoken:authtoken},method:"GET",dataType:"JSON",async:!1,success:function(resp){"success"==resp.status&&resp.result.your_details.mobile_no&&(phone_no=resp.result.your_details.mobile_no)},error:function(){}})}call_emi_api("debit",phone_no)}function call_emi_api(source,phone_no){var alt_sku=$("#alt_sku").val(),price=$("#selling_price_val").val(),is_3p=0;$("body").hasClass("s3p-prod-page")&&(is_3p=1);var myjio=0,url,attr=new Url(window.location.href).query.source_attribution;(attr&&"MyJio-CPS"==attr||"jio"==$.cookie("nms_refer_lite"))&&(myjio=1);let ajax_data={alt_sku:alt_sku,price:price,myjio:myjio,is_3p:is_3p,cat_id:emi_obj.cat_id,brand_id:emi_obj.brand_id};"credit"==source?(parent="emi_plans_dialog",emi_content="emi_dialog_content",ajax_url=domain_url+"catalog/emi/get"):(ajax_data.phone_no=phone_no,parent="debit_emi_plans_dialog",emi_content="debit_emi_dialog_content",ajax_url=domain_url+"catalog/emi/get_debit"),$.ajax({url:ajax_url,type:"GET",data:ajax_data,dataType:"JSON",success:function(resp){if("success"==resp.status){if(resp.low,resp.plans){let plan_html="";var plans=resp.plans;if("accordion"==window.emi_design?plan_html=get_emi_accordion_html(plans):"table"==window.emi_design&&(plan_html=get_emi_table_html(plans)),$("#"+emi_content).html(plan_html),plans.hasOwnProperty("Low_Cost_EMI")||plans.hasOwnProperty("No_Cost_EMI")){$("#"+parent+" .emi_disclaimer").append('\n                                <span id="emi_disclaim_close">X</span>\n                                <p><span>Note:</span> No-Cost/Low-Cost EMI or Cashback Schemes can be availed if the eligible products are the ONLY item in your cart. Please purchase additional items in a separate transaction. <a href="/emi-terms-and-conditions" target="_blank">T&C Apply</a></p>\n                            ');var win_height=$(window).height()-134;$("#"+emi_content).css("height",win_height),$("#"+emi_content).css("overflow-y","scroll")}else{var win_height=$(window).height()-44;$("#"+emi_content).css("height",win_height),$("#"+emi_content).css("overflow-y","scroll"),$("#"+parent+" .emi_disclaimer").css("display","none")}}if("credit"==source&&resp.jioonepay_offers&&resp.jioonepay_offers.length>0){let jio_offers=`<section class="pdp-offer-section" id="jio_onepay_offers">\n                        <div class="offer_details">\n                            <h1 class="title_section">${emi_obj.jpg_title} (${resp.jioonepay_offers.length})</h1>\n                            <div class="clearfix"></div> \n                            <ul class="offer_txt">`,height;for(off in resp.jioonepay_offers){let offer_obj=resp.jioonepay_offers[off];offer_obj.offerTnC&&check_is_valid_url(offer_obj.offerTnC)?jio_offers+=`<li>${offer_obj.offerDesc} <a href="${offer_obj.offerTnC}" target="_blank" class="external_link">Read T&C</a></li>`:jio_offers+=`<li>${offer_obj.offerDesc}</li>`}jio_offers+="</ul>\n                        </div>\n                    </section>",$("#delivery_section").next().after(jio_offers),$("#jio_onepay_offers .offer_details").height()>80&&($("#jio_onepay_offers .offer_details").addClass("less-content"),$("#jio_onepay_offers").append('<div class="toggle-btn clsviewall " data-parent="jio_onepay_offers">SEE MORE</div>'))}if(resp.low&&"credit"==source){let emi_offers_html=`<section class="avail_doorstep_finance" id="emi_cashback_offers">\n                        <div class="avail_dsf">\n                            <h1>Avail EMI on Credit Card</h1>\n                            <div class="avail_dsf_content">EMIs from &#8377;${resp.low}/month</div>\n                            <div class="knowmore_btn open_emi_popup">VIEW OPTIONS</div>\n                            <div class="clearfix"></div>\n                        </div>\n                    </section>`;$("#debit_card_emi_box").length>0?$("#debit_card_emi_box").after(emi_offers_html):$("#customer-CX").length>0?($("#customer-CX").after(emi_offers_html),$("#customer-CX").after('<div class="clearfix"></div>')):$("#delivery_section").next().after(emi_offers_html)}}else $("#emi_btn_content").remove()},error:function(){$("#emi_btn_content").remove()}})}function check_is_valid_url(urlString){var urlPattern;return!!new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(urlString)}function get_emi_accordion_html(plans){let plan_html="";for(emi_type in plans){var emi_name=emi_type.replace(/_/g," ");for(bank in plan_html+=`<div class="card_emi">\n            <h2>${emi_name}</h2>\n            <div class="emi-accordion" id="emi_accord">`,plans[emi_type]){var bank_name=plans[emi_type][bank][0].bank_name,bank_image=plans[emi_type][bank][0].bank_image;for(i in plan_html+=`<div class="card">\n            <div class="card-header collapsed" data-toggle="collapse" href="#emi_${emi_type}_${bank}">\n                <div class="bank_details">\n                    <img class="bank_image" src="/assets/global/emi/${bank_image}" />\n                    <span class="bank_name">${bank_name}</span>\n                </div>\n            </div>\n            <div id="emi_${emi_type}_${bank}" class="card-body collapse" data-parent="#emi_accord">`,plans[emi_type][bank]){var detail=plans[emi_type][bank][i],interest=detail.interest?detail.interest:detail.interest_percentage,offer_amt="";detail.offer_amount&&detail.offer_amount>0&&(offer_amt="You save &#8377;"+detail.offer_amount),plan_html+=`<div class="emi_details"><div>\n                <span class="amount">&#8377;${detail.emi_amount} for ${detail.tenure} months<br/><span class="save">${offer_amt}</span></span>`,"NO_COST_EMI"==detail.emi_type?plan_html+='<span class="interest">@No Cost</span>':plan_html+=`<span class="interest">@${interest}% p.a</span>`,plan_html+="</div>",detail.cashback&&(plan_html+=`<div class="cashback"><h3>Additional Cashback <br/> <span class="cashback_content">${detail.cashback}</span></h3></div>`),plan_html+="</div>"}plan_html+="</div></div>"}plan_html+="</div></div>"}return plan_html}function get_emi_table_html(emi_plans){let i=0,j=0,emi_html='<ul class="nav nav-tabs" id="emi_type" role="tablist">';for(emi_type in emi_plans){i++;let emi_name=emi_type.replace(/_/g," ");emi_html+=`<li class="nav-item">\n            <a class="nav-link ${1==i?"active":""}" id="${emi_type}-tab" data-toggle="tab" href="#${emi_type}" role="tab" aria-controls="home" aria-selected="true">${emi_name}</a>\n        </li>`}for(emi_type in emi_html+="</ul>",emi_html+='<div class="tab-content" id="Emi_Content">',i=0,emi_plans){for(bank in i++,emi_html+=`\n        <div class="tab-pane fade ${1==i?"show":""} active" id="${emi_type}" role="tabpanel" aria-labelledby="${emi_type}-tab">\n        <div class="${emi_type} standard_emi">`,emi_html+='<div class="emi-content">\n        <ul class="nav flex-column"><li>Banks</li>',j=0,emi_plans[emi_type]){let bank_name;j++,emi_html+=`<li class="nav-item">\n                            <a class="emi-nav-link" href="bank_${i}_${j}">${emi_plans[emi_type][bank][0].bank_name}</a>\n                        </li>`}for(bank in emi_html+="</ul>",j=0,emi_plans[emi_type]){j++;let style="none";for(index in 1==j&&(style="block"),emi_html+=`<div id="bank_${i}_${j}" class="emi_table_details" style="display:${style}">\n            <table>\n                <thead>\n                    <tr>\n                        <th>Tenure(Months)</th>\n                        <th>Annual Interest</th>\n                        <th>EMI</th>\n                        <th>Effective Cost</th>\n                    </tr>\n                </thead>\n                <tbody>`,emi_plans[emi_type][bank]){let emi_detail=emi_plans[emi_type][bank][index];var interest=emi_detail.interest?emi_detail.interest:emi_detail.interest_percentage;emi_html+=`<tr>\n                                <td>${emi_detail.tenure}</td>\n                                <td>${interest}%</td>\n                                <td>&#8377; ${emi_detail.emi_amount}</td>\n                                <td>&#8377; ${emi_detail.total_amount}</td>\n                            </tr>`}emi_html+="</tbody>\n                    </table>\n                </div>"}emi_html+="</div></div></div>"}return emi_html}function create_UUID(){var dt=(new Date).getTime(),uuid;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(c){var r=(dt+16*Math.random())%16|0;return dt=Math.floor(dt/16),("x"==c?r:3&r|8).toString(16)}))}function getAddonTotal(){var total_amount=parseInt(0);$(".ext_warranty_sku:checked").length>0&&(total_amount+=parseFloat($(".ext_warranty_sku:checked").attr("data-price"))),$(".add_on_sku:checked").each((function(){total_amount+=parseFloat($(this).attr("data-price"))})),total_amount=total_amount.toFixed(2),$("#add_on_total_amount").html("&#8377;"+total_amount)}function wishlistButton(){if(localStorage.getItem("userid")&&"0"!=localStorage.getItem("userid"))if(localStorage.getItem("jio_wishlist_sku")){var wishlist_sku=localStorage.getItem("jio_wishlist_sku");if((wishlist_sku=wishlist_sku.split(",")).length>0){wishlist_sku=wishlist_sku.map((function(sku){return parseInt(sku)}));var sku=parseInt($("#product_id").val());-1!==wishlist_sku.indexOf(sku)?($("#wishlist_btn").addClass("wishlist_active"),$("#wishlist_btn").attr("data-action","Remove")):($("#wishlist_btn").removeClass("wishlist_active"),$("#wishlist_btn").attr("data-action","Add"))}else $("#wishlist_btn").removeClass("wishlist_active"),$("#wishlist_btn").attr("data-action","Add")}else callWishlistApi("Fetch")}function callWishlistApi(action){$("#wishlist_btn").prop("disabled",!0);var userid=localStorage.getItem("userid"),authtoken=localStorage.getItem("authtoken"),sku=parseInt($("#product_id").val()),pin=localStorage.getItem("nms_mgo_pincode"),ajax_data={action:action,pin:pin,source:"web"};"Add"!=action&&"Remove"!=action||(ajax_data.productCode=sku),$.ajax({url:$("#wishlist_api_url").val(),method:"POST",crossDomain:!0,headers:{authtoken:authtoken,userid:userid},data:ajax_data,dataType:"JSON",success:function(resp){if($("#wishlist_btn").prop("disabled",!1),"success"==resp.status){if(resp.result.productList&&resp.result.productList.length>0){var result=resp.result.productList,wishlist_sku=[];for(i=0;i<result.length;i++)wishlist_sku.push(result[i].skuCode);localStorage.setItem("jio_wishlist_sku",wishlist_sku),-1!==wishlist_sku.indexOf(sku)?($("#wishlist_btn").addClass("wishlist_active"),$("#wishlist_btn").attr("data-action","Remove")):($("#wishlist_btn").removeClass("wishlist_active"),$("#wishlist_btn").attr("data-action","Add"))}else $("#wishlist_btn").removeClass("wishlist_active"),$("#wishlist_btn").attr("data-action","Add");"Add"==action&&notify("Product added to Wishlist successfully","success"),"Remove"==action&&notify("Product removed from Wishlist successfully","success")}else"Fetch"!=action&&notify("Error occurred. Try again later!","error")},error:function(){$("#wishlist_btn").prop("disabled",!1),"Fetch"!=action&&notify("Error occurred. Try again later!","error")}})}function get_recommendations(){var vertical_code=$("#vertical_code").val(),alg_similar_status=$("#alg_similar_status").val(),alg_bought_status=$("#alg_bought_status").val();if("1"==alg_similar_status||"1"==alg_bought_status){var sku=$("#product_id").val(),alg_similar_sku=$("#alg_similar_sku").val(),alg_bought_sku=$("#alg_bought_sku").val(),pincode=window.default_pin;localStorage.getItem("nms_mgo_pincode")&&(pincode=localStorage.getItem("nms_mgo_pincode"));var option_code="",headerdata={similar:alg_similar_sku,bought:alg_bought_sku,pin:pincode,"vertical-code":vertical_code,"option-code":""};localStorage.getItem("jio_store_id")&&(headerdata.pickupstore=localStorage.getItem("jio_store_id")),""!=alg_similar_sku||""!=alg_bought_sku?$.ajax({url:"/catalog/recommendations/get/"+sku,method:"GET",headers:headerdata,dataType:"JSON",success:function(resp){resp.similar&&resp.similar.length>0?bind_recommended_products_html("#algolia_similar","similar",resp.similar,vertical_code):$("#algolia_similar_sec").remove(),resp.bought&&resp.bought.length>0?bind_recommended_products_html("#algolia_bought","bought",resp.bought,vertical_code):$("#algolia_bought_sec").remove()},error:function(){}}):($("#algolia_similar_sec").remove(),$("#algolia_bought_sec").remove())}}function bind_recommended_products_html(parent,types,products,vertical_code){var html="";if("GROCERIES"==vertical_code||"ELECTRONICS"==vertical_code)var swiper_class="cus-view-swiper",extra_class="",next_elem="swiper-cus-view-swiper-next",prev_elem="swiper-cus-view-swiper-prev";else if($(parent).closest(".cus-view-product").removeClass().addClass("new_arrival_section"),"similar"==types)var swiper_class="similar_products_swiper",extra_class="products_swipe",next_elem="similar-swiper-button-next",prev_elem="similar-swiper-button-prev";else var swiper_class="bought_together_swiper",extra_class="products_swipe",next_elem="freq-swiper-button-next",prev_elem="freq-swiper-button-prev";for(html+=`<div class="swiper-container ${swiper_class} ${extra_class}"> <div class="swiper-wrapper">`,i=0;i<products.length;i++){var product=products[i];"GROCERIES"==vertical_code||"ELECTRONICS"==vertical_code?("ELECTRONICS"==vertical_code&&(product.in_stock=0),html+=get_groceries_html(product)):html+=get_other_vertical_html(product)}if(html+="</div></div>",html+=`<div class="swiper-button-next ${next_elem}"></div><div class="swiper-button-prev ${prev_elem}"></div>`,$(parent).html(html),localStorage.getItem("jio_store_id")&&$(parent+" a").each((function(){var a_href=$(this).attr("href");if(-1===a_href.indexOf("?str_id=")){var str_id_str="?str_id="+localStorage.getItem("jio_store_id");$(this).attr("href",a_href+str_id_str)}})),$(parent+"_sec").show(),"GROCERIES"==vertical_code||"ELECTRONICS"==vertical_code){var i=$("."+swiper_class).length;$(parent).find("."+swiper_class).addClass("prod-swipe-"+i),$(parent).find("."+next_elem).addClass("prod-right-"+i),$(parent).find("."+prev_elem).addClass("prod-left-"+i);var swiper=new Swiper(".prod-swipe-"+i,{slidesPerView:"auto",spaceBetween:0,navigation:{nextEl:".prod-right-"+i,prevEl:".prod-left-"+i},on:{slideChangeTransitionEnd:function(){var gtmStatus="0";$("#gtm_status").length>0&&(gtmStatus=$("#gtm_status").val()),"1"==gtmStatus&&$(this.slides).each((function(index,element){if(1==isSlideInViewport(element)){var index=$($(element).closest(".swiper-container").find(".swiper-slide")).index($(element).closest(".swiper-slide")),slideId="";if($(element).attr("id")&&(slideId=$(element).attr("id")),$(element).attr("data-prod")&&""!=$(element).attr("data-prod")&&(slideId=$(element).attr("data-prod")),""!=slideId&&-1===$.inArray(slideId,window.slideExists)){var type="product";window.slideExists.push(slideId),SwiperDataLayer(element,index,type)}}}))}}})}else var swiper=new Swiper("."+swiper_class,{slidesPerView:"auto",spaceBetween:0,navigation:{nextEl:"."+next_elem,prevEl:"."+prev_elem},on:{slideChangeTransitionEnd:function(){var gtmStatus="0";$("#gtm_status").length>0&&(gtmStatus=$("#gtm_status").val()),"1"==gtmStatus&&$(this.slides).each((function(index,element){if(1==isSlideInViewport(element)){var index=$($(element).closest(".swiper-container").find(".swiper-slide")).index($(element).closest(".swiper-slide")),slideId="";if($(element).attr("id")&&(slideId=$(element).attr("id")),$(element).attr("data-prod")&&""!=$(element).attr("data-prod")&&(slideId=$(element).attr("data-prod")),""!=slideId&&-1===$.inArray(slideId,window.slideExists)){var type="product";window.slideExists.push(slideId),SwiperDataLayer(element,index,type)}}}))}}});applyPlusMinusButton()}function get_groceries_html(product){var html="",discount_pct=product.discount_pct,selling_price=product.selling_price,mrp=product.mrp,save=0;let prod_vert=product.formulation_type;prod_vert=prod_vert.replace(/&/g,"and"),prod_vert=prod_vert.replace(/[^A-Z0-9]+/gi,"").toUpperCase();let master_code=JSON.parse(localStorage.getItem("jio_region_codes"));var vert_region_codes=master_code[prod_vert]?master_code[prod_vert]:[];let store_code="";for(let p in vert_region_codes){let vcode=vert_region_codes[p];product.store_wise_mrp[vcode]&&product.store_wise_mrp[vcode].available&&(store_code=vcode)}if(product.store_wise_mrp[store_code]){var store_wise_mrp=product.store_wise_mrp[store_code];discount_pct=store_wise_mrp.discount_pt,selling_price=store_wise_mrp.price.toFixed(2),mrp=store_wise_mrp.mrp.toFixed(2),save=(store_wise_mrp.mrp-store_wise_mrp.price).toFixed(2),store_wise_mrp.weight_range&&""!=store_wise_mrp.weight_range&&(product.display_name+="("+store_wise_mrp.weight_range+")")}var food_class="";if(product.food_type){var food_type=product.food_type.toLowerCase();"green dot"==food_type?food_class="text-veg":"red dot"==food_type?food_class="text-nonveg":"black cross"==food_type&&(food_class="text-nonedible")}var image_base=window.product_image_path;return image_url=image_base+product.image_url,html+=`<div class="swiper-slide" id="item_${product.product_code}">\n                <div class="viewed-items">\n                   <span class="food_type_sec"><span class="${food_class}"></span></span>\n                   <a href="${product.url_path}" data-objid="${product.product_code}" title="${product.display_name}">\n                   <input name="data-manu" type="hidden" value="${product.brand}" class="data-manu"/>\n                    <input name="data-vertical" type="hidden" value="${product.category_level.level1}" class="data-vertical"/>\n                    <input name="data-cate" type="hidden" value="${product.category_level.level2}" class="data-cate"/>\n                    <input name="data-subcate" type="hidden" value="${product.category_level.level3}" class="data-subcate"/>`,product.available_at_3p_seller&&null!=product.seller_names&&product.seller_names.length>0&&product.seller_names[0]&&(html+=`<input name="data-3p-available" type="hidden" value="${product.available_at_3p_seller}" class="data-3p-available"/>\n                        <input name="data-sellername" type="hidden" value="${product.seller_names[0]}" class="data-sellername"/>`),html+=`<span class="cat_image">\n                       <img src="${image_url}" alt="${product.display_name}">\n                   </span>\n                   <span class="cat_list_name">\n                       ${product.display_name}\n                   </span>\n               </a>\n               <div class="clearfix"></div>`,selling_price>0&&(html+='<div class="price-box">',html+=discount_pct>0?`<span class="final_price">&#8377; ${selling_price}</span>\n                    <span class="price">${mrp_label} <strike>&#8377; ${mrp}</strike></span>\n                    `:`${mrp_label} <span class="final_price center">&#8377; ${selling_price}</span>`,html+="</div>"),1==product.in_stock&&"A"==product.availability_status&&(html+=`<div class="cart_btn">\n                    <button type="button" title="ADD TO CART" class="toCart addtocartbtn" data-sku="${product.product_code}">\n                        <span class="txt_btn">Add to Cart</span>\n                        <span class="add_plus"></span>\n                    </button>\n                </div>`),html+="</div></div>"}function get_other_vertical_html(product){var html="",discount_pct=product.discount_pct,selling_price=product.selling_price,mrp=product.mrp,save=0;let prod_vert=product.formulation_type;prod_vert=prod_vert.replace(/&/g,"and"),prod_vert=prod_vert.replace(/[^A-Z0-9]+/gi,"").toUpperCase();let master_code=JSON.parse(localStorage.getItem("jio_region_codes"));var vert_region_codes=master_code[prod_vert]?master_code[prod_vert]:[];let store_code="";for(let p in vert_region_codes){let vcode=vert_region_codes[p];product.store_wise_mrp[vcode]&&product.store_wise_mrp[vcode].available&&(store_code=vcode)}if(product.store_wise_mrp[store_code]){var store_wise_mrp=product.store_wise_mrp[store_code];discount_pct=store_wise_mrp.discount_pt,selling_price=store_wise_mrp.price.toFixed(2),mrp=store_wise_mrp.mrp.toFixed(2),save=(store_wise_mrp.mrp-store_wise_mrp.price).toFixed(2),store_wise_mrp.weight_range&&""!=store_wise_mrp.weight_range&&(product.display_name+="("+store_wise_mrp.weight_range+")")}var food_class="";if(product.food_type){var food_type=product.food_type.toLowerCase();"green dot"==food_type?food_class="text-veg":"red dot"==food_type?food_class="text-nonveg":"black cross"==food_type&&(food_class="text-nonedible")}var image_base=window.product_image_path;return image_url=image_base+product.image_url,html+=`<div class="swiper-slide" id="item_${product.product_code}">\n                <div class="pro_items">`,discount_pct>0&&(html+=` <div class="offer_bade">\n                        <span class="offer_value">${discount_pct}</span>% OFF\n                    </div>`),html+=`<span class="food_type_sec"><span class="${food_class}"></span></span>\n                   <a href="${product.url_path}" data-objid="${product.product_code}" title="${product.display_name}">\n                        <input name="data-manu" type="hidden" value="${product.brand}" class="data-manu"/>\n                        <input name="data-vertical" type="hidden" value="${product.category_level.level1}" class="data-vertical"/>\n                        <input name="data-cate" type="hidden" value="${product.category_level.level2}" class="data-cate"/>\n                        <input name="data-subcate" type="hidden" value="${product.category_level.level3}" class="data-subcate"/>`,product.available_at_3p_seller&&null!=product.seller_names&&product.seller_names.length>0&&product.seller_names[0]&&(html+=`<input name="data-3p-available" type="hidden" value="${product.available_at_3p_seller}" class="data-3p-available"/>\n                            <input name="data-sellername" type="hidden" value="${product.seller_names[0]}" class="data-sellername"/>`),html+=`<span class="cat-img">\n                            <img src="${image_url}" alt="${product.display_name}">\n                        </span>\n                    </a>\n               <div class="clearfix"></div>\n               <div class="pro_detail">\n                    <span class="item_brand">${product.brand}</span>\n                    <div class="clearfix"></div>\n            `,selling_price>0&&(html+='<div class="price_box">',html+=discount_pct>0?`<span class="final_price">&#8377; ${selling_price}</span>\n                        <strike class="price">&#8377; ${mrp}</strike>\n                        <div class="clearfix"></div>\n                        <span class="save_price">Save &#8377; ${save}</span>\n                    `:`<span class="final_price">&#8377; ${selling_price}</span>`,html+="</div>"),html+=`<div class="clsgetname">\n                <a href="${product.url_path}" title="${product.display_name}">\n                    ${product.display_name}\n                </a>\n            </div>\n        </div>`,html+="</div></div>"}function get_product_price(){var sku=$("#product_id").val(),pincode=window.default_pin;localStorage.getItem("nms_mgo_pincode")&&(pincode=localStorage.getItem("nms_mgo_pincode")),$.ajax({url:"/catalog/productdetails/get/"+sku,method:"GET",headers:{pin:pincode},dataType:"JSON",success:function(resp){if("success"==resp.status){var mrp=resp.data.mrp.toFixed(2),selling_price=resp.data.selling_price.toFixed(2),region_actual_price=resp.data.region_actual_price,save=(resp.data.mrp-resp.data.selling_price).toFixed(2),discount_pct=resp.data.discount_pct,image_url=resp.data.image_url,tenant_ids=resp.data.tenant_ids,uom_price_compare=resp.data.uom_for_price,uom_unit_compare=resp.data.uom_for_unit,factor_price_compare=resp.data.factor_for_price_compare,teaser_tag=resp.data.teaser_tag;let productJson={};resp.data.display_name&&""!=resp.data.display_name&&$(".title-section h1").html(resp.data.display_name);let avail_marts=["JIO","JIO_INSTA","JIO_WA","JIO_INSTA_WA"];resp.data.mart_availability&&-1!=avail_marts.indexOf(resp.data.mart_availability)||($(".cart-holder").remove(),$(".product_availability").html('<div class="pdp_not_available">Product not available at your location.</div>').show(),$(".pdp_jio_loading").remove(),$(".product_holder_extra").remove()),""!=teaser_tag&&null!=teaser_tag&&$("#teaser_tag").html(`<span class="seller_msg" >${teaser_tag}</span>`);var region_style="",emi_status;if(""!=region_actual_price&&null!=region_actual_price?(region_style="#00a100",region_actual_price=region_actual_price.toFixed(2)):region_actual_price="","0"==lightning_label&&(region_actual_price=""),void 0!==teaser_tag&&teaser_tag.length>0)for(i=0;i<teaser_tag.length;i++)void 0!==teaser_tag[i]&&null!=teaser_tag[i]&&($(".teaser_tag").css("display","block"),$(".teaser_tag").append(`<span class="seller_msg" id="${[i]}" >${teaser_tag[i]}</span>`));if("1"==uom_attribute)if(""!=uom_price_compare&&""!=uom_unit_compare&&""!=factor_price_compare)if(null!=uom_price_compare&&null!=uom_unit_compare&&null!=factor_price_compare)var uom_price=uom_price_compare,uom_unit=uom_unit_compare,factor_price=(selling_price*factor_price_compare).toFixed(2);else var uom_price="",uom_unit="",factor_price="";else var uom_price="",uom_unit="",factor_price="";else var uom_price="",uom_unit="",factor_price="";for(i=0;i<tenant_ids.length;i++)window.tenant_id.push(tenant_ids[i]);if($("#selling_price_val").val(selling_price),$("#emi_btn_content").length>0)$("#emi_plans_dialog").addClass("emi_"+window.emi_design),1==$("#emi_status").val()?call_emi_api("credit",0):$("#emi_btn_content").length>0&&$("#emi_btn_content").remove();var stTime=new Date((new Date).setHours(0,0,0,0)).getTime(),endTime=new Date((new Date).setHours(23,59,59,59)).getTime(),currentTime,progress=(endTime-(new Date).getTime())/1e3,hours,minutes,seconds,result_time=parseInt(progress/3600)+"h "+parseInt(progress/60)%60+"m "+parseInt(progress%60,10)+"s",total_seconds,percent=progress/Math.floor((endTime-stTime)/1e3)*100;discount_pct>0?(""!=factor_price&&""!=uom_price&&""!=uom_unit?""!=region_actual_price?($("#alg_price").html(`\n\t\t\t\t\t\t<div class="available-offers">\n                            <h6 class="limited-deal">${lightning_label}</h6>\n                        </div>`),$("#alg_price").append(`\n\t\t\t\t\t\t<span class="final-price"><span style="color:${region_style}">&#8377;  ${selling_price}</span></span>\n\t\t\t\t\t\t<span class="region-price" style="padding: 0px 10px 0px 0px"> &#8377;<s> ${region_actual_price} </s></span>\n\t\t\t\t\t\t<span> (&#8377; ${factor_price}/${uom_price} ${uom_unit})</span>\n\t\t\t\t\t\t<span class="price"> ${mrp_label} <strike>&#8377;  ${mrp}</strike></span>\n\t\t\t\t\t\t<div class="clearfix"></div>\n\t\t\t\t\t\t<span class="disc-price">You Save: <span>&#8377;  ${save}</span></span>\n\t\t\t\t\t\t<span class="tax_text">Inclusive of all taxes</span>                    \n\t\t\t\t   `),$("#alg_price").append('\n\t\t\t\t\t\t<p class="time-left"><span class="active cd_timer_deal"></span> left</p>     \n                        <div class="progress-bar blue">\n                            <span class="result_progress"></span>\n                        </div> ')):$("#alg_price").html(`\n                        <span class="final-price"><span>&#8377;  ${selling_price}</span></span>\n\t\t\t\t\t\t<span> (&#8377; ${factor_price}/${uom_price} ${uom_unit})</span>\n                        <span class="price"> ${mrp_label} <strike>&#8377;  ${mrp}</strike></span>\n                        <div class="clearfix"></div>\n                        <span class="disc-price">You Save: <span>&#8377;  ${save}</span></span>\n                        <span class="tax_text">Inclusive of all taxes</span>                    \n                   `):""!=region_actual_price?($("#alg_price").html(`\n\t\t\t\t\t\t<div class="available-offers">\n                            <h6 class="limited-deal">${lightning_label}</h6>\n                        </div>`),$("#alg_price").append(`\n                        <span class="final-price"><span style="color:${region_style}">&#8377;  ${selling_price}</span></span>\n\t\t\t\t\t\t<span class="region-price" style="padding: 0px 10px 0px 0px"> &#8377;<s> ${region_actual_price} </s></span>\n                        <span class="price"> ${mrp_label} <strike>&#8377;  ${mrp}</strike></span>\n                        <div class="clearfix"></div>\n                        <span class="disc-price">You Save: <span>&#8377;  ${save}</span></span>\n                        <span class="tax_text">Inclusive of all taxes</span>                    \n                   `),$("#alg_price").append('\n\t\t\t\t\t\t<p class="time-left"><span class="active cd_timer_deal"></span> left</p>     \n                        <div class="progress-bar blue">\n                            <span class="result_progress"></span>\n                        </div> ')):$("#alg_price").html(`\n                        <span class="final-price"><span>&#8377;  ${selling_price}</span></span>\n                        <span class="price"> ${mrp_label} <strike>&#8377;  ${mrp}</strike></span>\n                        <div class="clearfix"></div>\n                        <span class="disc-price">You Save: <span>&#8377;  ${save}</span></span>\n                        <span class="tax_text">Inclusive of all taxes</span>                    \n                   `),$(".dis_section").length>0?$(".dis_section span").text(discount_pct):$(".gallery-top .swiper-wrapper").after(`<div class="dis_section"> <span>${discount_pct}</span>%<div class="clearfix"></div>OFF </div>`)):(""!=region_actual_price?($("#alg_price").html(`<div class="available-offers">\n                            <h6 class="limited-deal">${lightning_label}</h6>\n                        </div> `),$("#alg_price").append(`\n                        <span class="final-price">${mrp_label} <span  style="color:${region_style}">&#8377; ${selling_price}</span></span>\n\t\t\t\t\t\t<span class="region-price" style="padding: 0px 10px 0px 0px"> &#8377;<s> ${region_actual_price} </s></span>\n                        <span class="tax_text">Inclusive of all taxes</span>                    \n                    `),$("#alg_price").append('\n\t\t\t\t\t\t<p class="time-left"><span class="active cd_timer_deal"></span> left</p>     \n                        <div class="progress-bar blue">\n                            <span class="result_progress"></span>\n                        </div> ')):$("#alg_price").html(`\n                        <span class="final-price" >${mrp_label} <span>&#8377; ${selling_price}</span></span>\n                        <span class="tax_text">Inclusive of all taxes</span>                    \n                    `),$(".dis_section").remove()),0==resp.data.visible_in_catalog&&$(".cart-holder").remove();let vertical_code=$("#vertical_code").val();if("A"==resp.data.availability_status||"I"==resp.data.availability_status){var max_qty=resp.data.max_qty_in_order,stock_qty=resp.data.stock_qty;stock_qty<max_qty&&(max_qty=stock_qty),max_qty<=0&&$(".cart-holder").remove(),$("#is_in_stock").html('<div class="stock_details">In Stock</div>')}else"S"==resp.data.availability_status?($(".cart-holder").remove(),$("#delivery_section").remove(),$("#is_in_stock").html('<div class="os_details">Unavailable</div>')):"T"!=resp.data.availability_status&&"R"!=resp.data.availability_status||($(".cart-holder").remove(),$("#delivery_section").remove(),$("#is_in_stock").html('<div class="os_details">Unavailable</div>'));if("1"==window.preorder_status&&check_pre_order(resp.data),$(".product-add-form").show(),$(".pdp_jio_loading").remove(),$(".product_availability").show(),""!=resp.data.tag_name&&$("#center_col").prepend(`<div class="sponsored"><div class="sponsored_arrow"></div><p>${resp.data.tag_name}</p></div>`),resp.data.variants&&resp.data.variants.length>0){var variants=resp.data.variants,variants_html="",url_obj=new URL(window.location),all_size_disabled=!0,size_variant_available=!1;for(i=0;i<variants.length;i++){var variant=variants[i],current="";for("size"==variant.facet_id&&(size_variant_available=!0),k=0;k<variant.facet_values.length;k++){var value,image_url,selected_val;if(1==(value=variant.facet_values[k]).current)if("colour"==variant.facet_id)if(value.additional_info&&value.additional_info.swatch_image_url)current+=`<img src="${image_url=window.product_image_path+"images/product/original/"+value.additional_info.swatch_image_url}" />&nbsp;${value.value}`;else current+=value.value;else(selected_val=url_obj.searchParams.get(variant.facet_id))!=value.value?current+="Select "+variant.facet_name:current+=value.value,1==variant.facet_values.length&&(current=value.value),"size"!=variant.facet_id&&value.current&&(current=value.value)}for(variants_html+=`\n                        <section class="product_size_section" id="variant_${variant.facet_id}">\n                            <div class="pro_size_container">\n                                <div class="top_section">\n                                    <span class="select-size" id="select_${variant.facet_id}">${variant.facet_title} : ${current}</span>\n                                </div>\n                                <ul class="sizes-list">`,k=0;k<variant.facet_values.length;k++){var value=variant.facet_values[k],class_name="",inner_html="";if("colour"==variant.facet_id){class_name="color-variant";var status=1;if(value.hasOwnProperty("status")&&0==value.status&&(status=0),inner_html+=1==status?`<a href='${domain_url+value.product_url}'>`:"<a>",value.additional_info&&value.additional_info.swatch_image_url){class_name="image-variant";var image_url=window.product_image_path+"images/product/original/"+value.additional_info.swatch_image_url;inner_html+=`<div class="vari-image-box ${1==value.current?"selected":""}"><img src="${image_url}" /></div>`}else inner_html+=`<div class="vari-color-box ${1==value.current?"selected":""}" style="background:${value.value}"></div>`;inner_html+="</a>"}else{var selected_val=url_obj.searchParams.get(variant.facet_id),selected_class=value.value==selected_val?"selected":"";1==variant.facet_values.length&&(selected_class="selected"),1==value.status&&(all_size_disabled=!1),"size"!=variant.facet_id&&value.current&&(selected_class="selected");var prod_url=domain_url+value.product_url;inner_html+=`<button class="size-btn ${selected_class}  ${0==value.status?"disabled":""}" data-prodcode = "${value.product_code}" data-attr="${variant.facet_id}" data-url="${prod_url}" data-value="${value.value}">\n                                <span>${value.value}</span>\n                            </button>`}value.hasOwnProperty("status")&&0==value.status&&(class_name+=" disabled"),variants_html+=`<li class="${class_name}">${inner_html}</li>`}variants_html+="</ul>\n                            </div>\n                        </section>"}1==all_size_disabled&&1==size_variant_available&&$(".addtocartbtn").prop("disabled",!0),$("#variant_holder").html(variants_html);var cartInfo=localStorage.getItem("cart_info");if(localStorage.getItem("jio_store_id"))var cartInfo=localStorage.getItem("pickup_cart_info");if(cartInfo){var cart_products=JSON.parse(cartInfo);if(cart_products.cart.lines)for(var products=cart_products.cart.lines,sku_val=$("#sku_val").val(),i=0;i<products.length;i++)if(products[i].product_code==sku_val){var elem=$("button[data-prodcode='"+sku_val+"']");elem.addClass("selected");var attribute=elem.attr("data-attr"),value,text=(attribute=attribute.charAt(0).toUpperCase()+attribute.slice(1))+" : "+(value=elem.attr("data-value"));elem.parent().parent().prev().find("span").text(text)}}$(".sizechart_div #size_chart_btn").length>0&&($("#variant_size .top_section").append($("#size_chart_btn").clone().addClass("active")),$(".sizechart_div #size_chart_btn").remove())}var gtmStatus;if("1"==document.getElementById("gtm_status").value&&resp.data.gtm_details&&null!=resp.data.gtm_details&&null!=resp.data.gtm_details.status&&1==resp.data.gtm_details.status){"undefined"!=typeof journeyDataLayer&&journeyDataLayer(),dataLayer.push({ecommerce:null});var custEmail=null!=localStorage.getItem("displayemail")?localStorage.getItem("displayemail"):"",custNew=null!=localStorage.getItem("new_customer")?localStorage.getItem("new_customer"):"",cityName=null!=localStorage.getItem("nms_mgo_city")?localStorage.getItem("nms_mgo_city").toUpperCase():"NA",pincode=null!=localStorage.getItem("nms_mgo_pincode")?localStorage.getItem("nms_mgo_pincode").toUpperCase():"NA",appinfo={},adid="";localStorage.getItem("jio_adparams")&&(appinfo=JSON.parse(localStorage.getItem("jio_adparams"))).Adid&&(adid=appinfo.Adid);var dimension19="FALSE",dimension20=null,dimension18=null,dimension21="RRL",dimension22=!1,prod_position="",sku=resp.data.gtm_details.id;if($.isEmptyObject(window.searchKeyData)){var objectData=localStorage.getItem("nms_promo_tag");objectData&&$.each(JSON.parse(objectData),(function(itemIndex,itemElement){sku&&itemIndex==sku&&(itemElement.dimension19&&(dimension19=itemElement.dimension19),itemElement.dimension20&&(dimension20=itemElement.dimension20),itemElement.dimension18&&(dimension18=itemElement.dimension18),itemElement.dimension21&&(dimension21=itemElement.dimension21),itemElement.dimension22&&(dimension22=itemElement.dimension22),itemElement.position&&(prod_position=itemElement.position))}))}else $.each(JSON.parse(window.searchKeyData),(function(itemIndex,itemElement){sku&&itemIndex==sku&&(itemElement.dimension19&&(dimension19=itemElement.dimension19),itemElement.dimension20&&(dimension20=itemElement.dimension20),itemElement.dimension18&&(dimension18=itemElement.dimension18),itemElement.dimension21&&(dimension21=itemElement.dimension21),itemElement.dimension22&&(dimension22=itemElement.dimension22),itemElement.position&&(prod_position=itemElement.position))}));"undefined"!=typeof bannerPromoTag&&(bannerPromoTag(),null!=window.dimension18&&(dimension18=window.dimension18)),""!=resp.data.seller_name&&(dimension21=resp.data.seller_name),""!=resp.data.available_at_3p_seller&&(dimension22=resp.data.available_at_3p_seller),productJson={name:resp.data.gtm_details.name,id:resp.data.gtm_details.id,price:resp.data.gtm_details.price,brand:resp.data.gtm_details.brand,category:resp.data.gtm_details.category,dimension18:dimension18,dimension19:dimension19,dimension20:dimension20,dimension21:"RRL",dimension22:!1,dimension24:window.dimension24,dimension25:window.dimension25,dimension26:window.dimension26,dimension27:window.dimension27},""!=prod_position&&(productJson.position=prod_position,$("#data-position").val(prod_position)),""!=dimension21&&null!=dimension21&&"RIL"!=dimension21&&(productJson.dimension21=dimension21),""!=dimension22&&0!=dimension22&&null!=dimension22&&(productJson.dimension22="string"!=typeof dimension22||"1"!==dimension22||Boolean(parseInt(dimension22))),""!=user_id&&""!=custEmail?dataLayer.push({event:"ecom_productDetail",journey:window.journeyData,ecommerce:{detail:{products:[productJson]}},customer:{isLoggedIn:!0,id:user_id,email:$.md5(custEmail),new_customer:custNew,city:cityName},appinfo:appinfo,appinfo_adid:adid}):dataLayer.push({event:"ecom_productDetail",journey:window.journeyData,ecommerce:{detail:{products:[productJson]}},customer:{isLoggedIn:!1,city:cityName},appinfo:appinfo,appinfo_adid:adid})}resp.data.variants_extra_json&&(window.variants_extra_json=resp.data.variants_extra_json);var url=new Url,rating=$(".rating-content #average").html(),total_rating=$("#total_rating").html(),meta_desc=document.querySelector("meta[name=description]").content,brand_name="";$(".brand_name").html()&&(brand_name=$(".brand_name").html());var json_ld_obj={"@context":"http://schema.org/","@type":"Product",name:$(".title-section h1").html(),image:url.host+image_url,description:meta_desc,offers:{"@type":"Offer",price:selling_price,priceCurrency:"INR"},url:url.host+url.path,brand:{"@type":"Thing",name:brand_name},sku:$("#product_code").val()};parseInt(rating)>0&&(json_ld_obj.aggregateRating={"@type":"AggregateRating",ratingValue:rating,reviewCount:total_rating});const script=document.createElement("script");script.setAttribute("type","application/ld+json"),script.textContent=JSON.stringify(json_ld_obj),document.head.appendChild(script),"A"!=resp.data.availability_status&&"I"!=resp.data.availability_status||resp.data.dsf_status&&1==resp.data.dsf_status&&void 0!==doorstepFinanceEligibility&&doorstepFinanceEligibility(selling_price)}else $(".cart-holder").remove(),$(".product_availability").html('<div class="pdp_not_available">Product not available at your location.</div>').show(),$(".pdp_jio_loading").remove(),$(".product_holder_extra").remove();$("#pdp-skeleton").remove()},error:function(){$(".cart-holder").remove(),$(".product_availability").html('<div class="pdp_not_available">Product not available at your location.</div>').show(),$(".pdp_jio_loading").remove(),$(".product_holder_extra").remove(),$("#pdp-skeleton").remove()}})}function check_pre_order(prod){if(prod.pre_order&&!0===prod.pre_order_enabled){let pre_order=prod.pre_order,currentTime=(new Date).getTime();if(pre_order.pre_launch_date&&pre_order.start_date&&pre_order.end_date){let pre_launch_date,pre_launch_time,pre_launch_date_time=pre_order.pre_launch_date.split(" ")[0]+"T"+pre_order.pre_launch_date.split(" ")[1]+".000+05:30";pre_launch_date_time=new Date(pre_launch_date_time).getTime();let pre_launch_start_date,pre_launch_start_time,pre_launch_start_date_time=pre_order.start_date.split(" ")[0]+"T"+pre_order.start_date.split(" ")[1]+".000+05:30";pre_launch_start_date_time_stamp=new Date(pre_launch_start_date_time).getTime();let pre_launch_end_date,pre_launch_end_time,pre_launch_end_date_time=pre_order.end_date.split(" ")[0]+"T"+pre_order.end_date.split(" ")[1]+".000+05:30";if(pre_launch_end_date_time_stamp=new Date(pre_launch_end_date_time).getTime(),$(".teaser_tag").html('<span class="seller_msg" id="teaser_1">Pre Order</span>'),$(".teaser_tag").css("display","block"),pre_launch_end_date_time_stamp<=currentTime);else if(pre_launch_start_date_time_stamp<=currentTime&&pre_launch_end_date_time_stamp>=currentTime){let dispatch_date_format="";if(pre_order.dispatch_date&&null!=pre_order.dispatch_date){let pre_launch_dispatch_date=pre_order.dispatch_date.split(" ")[0],pre_launch_dispatch_time=pre_order.dispatch_date.split(" ")[1],pre_launch_dispatch_date_time,dispatch_date_time=new Date(pre_launch_dispatch_date+"T"+pre_launch_dispatch_time+".000+05:30"),hours=dispatch_date_time.getHours(),minutes=dispatch_date_time.getMinutes(),ampm=hours>=12?"PM":"AM";hours%=12,hours=hours||12,minutes=minutes<10?"0"+minutes:minutes;let strTime=hours+":"+minutes+" "+ampm;dispatch_date_format=dispatch_date_time.getDate()+"/"+(dispatch_date_time.getMonth()+1)+"/"+dispatch_date_time.getFullYear()+" "+strTime}$(".cart-holder .cart_btn").remove(),$(".cart-holder .actions").remove(),$(".cart-holder").append(`<div class="pre-order-actions"><div class="pre-order-btn"><button type="button" title="ADD TO CART" class="toCart addtocartbtn prodbtn pre-order-btn" data-sku="${prod.product_code}"> Pre-Order Now </button></div><div class="pre-order-txtmsg"><p>${pre_order.message}</p><span>${dispatch_date_format}</span></div></div>`)}else if(pre_launch_date_time<=currentTime&&pre_launch_start_date_time_stamp>=currentTime){var monthNames=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];let start_date_time=new Date(pre_launch_start_date_time),start_date_format=start_date_time.getDate()+"-"+monthNames[start_date_time.getMonth()]+"-"+start_date_time.getFullYear(),end_date_time=new Date(pre_launch_end_date_time),end_date_format=end_date_time.getDate()+"-"+monthNames[end_date_time.getMonth()]+"-"+end_date_time.getFullYear();$("#prod_delivery_details").after(`<div class="pdp_pre_order"><h2>Coming Soon!</h2><p>Pre orer will be available from ${start_date_format} to ${end_date_format}</p></div>`),$(".cart-holder").remove(),!1===pre_order.price_visibility&&($(".price-box").remove(),$("#emi_btn_content").remove())}}}}function surveyCategories(responce=null){responce&&(window.feedback_categories=responce,window.feedback_categories.hasOwnProperty("status")&&window.feedback_categories.status&&"success"==window.feedback_categories.status&&window.feedback_categories.hasOwnProperty("data")&&window.feedback_categories.data&&window.feedback_categories.data.hasOwnProperty("child")&&window.feedback_categories.data.child&&$(window.feedback_categories.data.child).each((function(index,value){value.hasOwnProperty("id")&&""!=value.id&&value.hasOwnProperty("name")&&""!=value.name&&$("#reported_issue").append("<option data-index='"+index+"' value='"+value.id+"' data-name='"+value.name+"'>"+value.name+"</option>")})))}function bind_deals_products_html(parent,parent_swipe,products,vertical_code,headers){var html="",bundled_product_code="",totalAmount=0,totalSellingAmount=0,totalSavings=0,totalAdditionalSavings=0,ItemsAvailable=0,Iterate=1,bundle_child_product="",bundle_parent_product="";if(bundle_parent_product=$(".otc-product-page #product_id").val(),products&&(ItemsAvailable=Object.keys(products).length),"#pdp_best_deals_products"==parent)var next_elem="swiper-deals-view-swiper-next",prev_elem="swiper-deals-view-swiper-prev";if("#pdp_bundle_deals_products"==parent)var next_elem="swiper-bundle-view-swiper-next",prev_elem="swiper-bundle-view-swiper-prev";if(headers&&Object.keys(headers).length>0){if(headers.hasOwnProperty("title")&&null!=headers.title&&"-"!=headers.title&&(html+='<div class="bestdeals_title"> <h2 id="bestdeals_title">'+headers.title+"</h2> </div>"),headers.hasOwnProperty("subtitle")&&null!=headers.subtitle&&"-"!=headers.subtitle&&(html+='<div class="bestdeals_subtitle">'+headers.subtitle+"</div>"),headers.hasOwnProperty("tagline")&&null!=headers.tagline&&"-"!=headers.tagline){if("#pdp_best_deals_products"==parent){html+='<div class="toggle_section"><div class="bestdeals_tagline">'+headers.tagline+'<span id="productName"></span></div>';var next_elem="swiper-deals-view-swiper-next",prev_elem="swiper-deals-view-swiper-prev"}if("#pdp_bundle_deals_products"==parent){html+='<div class="toggle_section"><div class="bestdeals_tagline">'+headers.tagline+"</div>";var next_elem="swiper-bundle-view-swiper-next",prev_elem="swiper-bundle-view-swiper-prev"}}html+='<div class="bestdeals_toggle active"></div></div>',ItemsAvailable>0&&("#pdp_best_deals_products"==parent&&(html+=ItemsAvailable>1?'<p class="prod_count">'+ItemsAvailable+" Items Available</p>":'<p class="prod_count">'+ItemsAvailable+" Item Available</p>"),"#pdp_bundle_deals_products"==parent&&(html+=ItemsAvailable>1?'<p class="prod_count">'+ItemsAvailable+" products</p>":'<p class="prod_count">'+ItemsAvailable+" product</p>")),html+='<div class="bestdeals_content">'}html+=`<div class="${parent_swipe} swiper-container products_swipe"><div class="swiper-wrapper">`,$.each(products,(function(i,product){bundle_child_product=product.product_code,bundled_product_code+=Iterate==ItemsAvailable?product.product_code:product.product_code+",";var discount_pct=product.discount_pct,selling_price=product.selling_price,mrp=product.mrp,save=0,promotionOffer={},promotion_offer_value="",P_DISCPCT=0,P_FORAMT=0,P_DISCAMT=0;if(1==product.mcat_api_status&&(discount_pct=product.discount_pct,selling_price=product.selling_price.toFixed(2),save=((mrp=product.mrp.toFixed(2))-selling_price).toFixed(2)),product.hasOwnProperty("offer_details")&&product.offer_details&&(promotionOffer=product.offer_details),promotionOffer.hasOwnProperty("offer_type")&&null!=promotionOffer.offer_type){if("P_DISCPCT"==promotionOffer.offer_type){var pctDiscount=promotionOffer.offer_value.replace("%","").replace(" ","").split("pct:");pctDiscount&&pctDiscount[1]&&(P_DISCPCT=parseInt(pctDiscount[1]),totalAdditionalSavings+=selling_price*(P_DISCPCT/100))}"P_DISCAMT"==promotionOffer.offer_type&&(P_DISCAMT=parseInt(promotionOffer.offer_value.replace(" ","")),totalAdditionalSavings+=P_DISCAMT),"P_FORAMT"==promotionOffer.offer_type&&(P_FORAMT=parseInt(promotionOffer.offer_value.replace(" ","")),totalAdditionalSavings+=P_FORAMT)}null!=mrp&&(totalAmount+=parseFloat(mrp)),null!=selling_price&&(totalSellingAmount+=parseFloat(selling_price)),null!=save&&(totalSavings+=parseInt(save)),html+='\n                <div class="swiper-slide promotion_product_'+i+'" data-promoId="'+i+`" id="item_${parent_swipe}_${product.product_code}">`,product.hasOwnProperty("add_on_service")&&null!=product.add_on_service&&(html+=product.add_on_service),html+='<div class="pro_items">',discount_pct>0&&(html+=`<div class="offer_bade">\n                        <span class="offer_value">${discount_pct}</span>% OFF\n                    </div>`);var food_class="",food_type,food_type;1==product.mcat_api_status?product.hasOwnProperty("json_ext")&&product.json_ext.hasOwnProperty("food_type")&&null!=product.json_ext.food_type&&null!=product.json_ext.food_type&&("green dot"==(food_type=product.json_ext.food_type.toLowerCase())?food_class="text-veg":"red dot"==food_type?food_class="text-nonveg":"black cross"==food_type&&(food_class="text-nonedible")):product.food_type&&("green dot"==(food_type=product.food_type.toLowerCase())?food_class="text-veg":"red dot"==food_type?food_class="text-nonveg":"black cross"==food_type&&(food_class="text-nonedible"));var image_base=window.product_image_path;if(1==product.mcat_api_status?product.hasOwnProperty("image_url")&&product.image_url&&(image_url=product.image_url):image_url=image_base+product.image_url,html+=`<span class="food_type_sec"><span class="${food_class}"></span></span>`,html+=`<a class="home_ripple" data-objid="${product.product_code}" href="${window.location.origin+"/"+product.url_path}" title="${product.display_name}">`,1==product.mcat_api_status){var category="",prod_verticals="",sub_category="",categoryIndex=0,categoryLength=0;1==product.mcat_api_status&&product.hasOwnProperty("categories")&&product.categories&&($(product.categories).each((function(cateIndex,cateValue){cateValue.hasOwnProperty("is_virtual")&&0==cateValue.is_virtual&&(categoryIndex=cateIndex)})),product.categories[categoryIndex].hasOwnProperty("bread_crumbs")&&product.categories[categoryIndex].bread_crumbs&&((categoryLength=product.categories[categoryIndex].bread_crumbs.length)>1&&product.categories[categoryIndex].bread_crumbs[1].hasOwnProperty("name")&&product.categories[categoryIndex].bread_crumbs[1].name&&(prod_verticals=product.categories[categoryIndex].bread_crumbs[1].name),categoryLength>2&&product.categories[categoryIndex].bread_crumbs[2].hasOwnProperty("name")&&product.categories[categoryIndex].bread_crumbs[2].name&&(category=product.categories[categoryIndex].bread_crumbs[2].name),categoryLength>3&&product.categories[categoryIndex].bread_crumbs[3].hasOwnProperty("name")&&product.categories[categoryIndex].bread_crumbs[3].name&&(sub_category=product.categories[categoryIndex].bread_crumbs[3].name))),""!=prod_verticals&&(html+=`<input name="data-vertical" type="hidden" value="${prod_verticals}" class="data-vertical"/>`),product.hasOwnProperty("brand")&&product.brand.hasOwnProperty("name")&&""!=product.brand.name&&(html+=`<input name="data-manu" type="hidden" value="${product.brand.name}" class="data-manu"/>`),""!=category&&(html+=`<input name="data-cate" type="hidden" value="${category}" class="data-cate"/>`),""!=sub_category&&(html+=`<input name="data-subcate" type="hidden" value="${sub_category}" class="data-subcate"/>`),product.hasOwnProperty("json_ext")&&product.json_ext.hasOwnProperty("available_at_3p_seller")&&1==product.json_ext.available_at_3p_seller&&product.json_ext.hasOwnProperty("seller_name")&&null!=product.json_ext.seller_name&&(html+=`<input name="data-3p-available" type="hidden" value="${product.json_ext.available_at_3p_seller}" class="data-3p-available"/>\n                <input name="data-sellername" type="hidden" value="${product.json_ext.seller_name}" class="data-sellername"/>`)}else html+=`<input name="data-manu" type="hidden" value="${product.brand}" class="data-manu"/>\n                    <input name="data-vertical" type="hidden" value="${product.category_level.level1}" class="data-vertical"/>\n                    <input name="data-cate" type="hidden" value="${product.category_level.level2}" class="data-cate"/>\n                    <input name="data-subcate" type="hidden" value="${product.category_level.level3}" class="data-subcate"/>`,product.available_at_3p_seller&&null!=product.seller_names&&product.seller_names.length>0&&product.seller_names[0]&&(html+=`<input name="data-3p-available" type="hidden" value="${product.available_at_3p_seller}" class="data-3p-available"/>\n                <input name="data-sellername" type="hidden" value="${product.seller_names[0]}" class="data-sellername"/>`);html+=`<span class="cat-img">\n                        <img class="product-image-photo" src="${image_url}" alt="${product.display_name}">\n                    </span>\n                </a>\n                <div class="clearfix"></div>\n                <div class="pro_detail">`,html+=`<div class="clsgetname">\n                <a href="${window.location.origin+"/"+product.url_path}" title="${product.display_name}">\n                    ${product.display_name}\n                </a>\n            </div>`,selling_price>0&&(html+='<span class="price_box">',discount_pct>0?(html+=`<span class="final_price">&#8377; ${selling_price}</span><br>`,"GROCERIES"!=vertical_code&&"PREMIUMFRUITS"!=vertical_code||(html+=`${mrp_label}`),html+=`<strike class="price">&#8377; ${mrp}</strike>\n                <div class="clearfix"></div> `,save>0&&(html+=`<span class="save_price">You save &#8377; ${save}</span>`)):("GROCERIES"!=vertical_code&&"PREMIUMFRUITS"!=vertical_code||(html+=`${mrp_label}`),html+=`<span class="final_price center">&#8377; ${selling_price}</span>`,mrp>selling_price&&(html+=`<strike class="price">&#8377; ${mrp}</strike>\n                    <div class="clearfix"></div>`),save>0&&(html+=`<span class="save_price">You save &#8377; ${save}</span>`)),html+="</span>","#pdp_best_deals_products"==parent&&(P_DISCPCT>0&&(html+='<p class="additional_txt">Additional '+P_DISCPCT+'% off with this deal </p><div class="clearfix"></div>'),P_DISCAMT>0&&(html+='<p class="additional_txt">Additional '+P_DISCAMT+' off with this deal </p><div class="clearfix"></div>'),P_FORAMT>0&&(html+='<p class="additional_txt">Get this at '+P_FORAMT+' Rs with this deal </p><div class="clearfix"></div>'))),"#pdp_best_deals_products"==parent&&(product.mcat_api_status,"A"==product.availability_status&&(html+=`<div class="cart_btn" data-cartType="best">\n                            <button type="button" title="ADD TO CART" class="toCart addtocartbtn best_cart" data-promosku="${product.product_code}" data-sku="${product.product_code}">\n                                <span class="txt_btn">ADD</span>\n                                <span class="add_plus"></span>\n                            </button>\n                        </div>`)),html+='</div>\n        <div class="clearfix"></div>',html+="</div>",Iterate<ItemsAvailable&&("#pdp_best_deals_products"==parent&&(html+='<div class="or_icon">OR</div>'),"#pdp_bundle_deals_products"==parent&&(html+='<div class="plus_tag_icon">+</div>')),html+="</div>",Iterate++})),html+="</div></div>","#pdp_bundle_deals_products"==parent&&(html+='<div class="bundle_mrp_label">',totalSellingAmount>0&&(html+='<div><span class="mrp_price"> &#8377;'+totalSellingAmount+"</span>"),totalAmount>0&&(html+='<span class="final_price"> &#8377;'+totalAmount+"</span><br/>"),totalSavings>0&&(html+='<span class="save_price">Total Savings &#8377;'+totalSavings.toFixed(2)+"</span>"),totalAdditionalSavings>0&&(html+='<br/><span class="additional_offer_price">Additional '+totalAdditionalSavings.toFixed(2)+" Rs Off with this deal.</span>"),html+="</div>",html+=`<div class="cart_btn" data-cartType="bundle">\n                <button type="button" title="ADD TO CART" class="toCart addtocartbtn" data-parent="${bundle_parent_product}" data-promosku="${bundle_child_product}" data-sku="`+bundled_product_code+'">',html+=ItemsAvailable>1?'<span class="txt_btn">Add '+ItemsAvailable+" Items</span>":'<span class="txt_btn">Add '+ItemsAvailable+" Item</span>",html+="</button></div>",html+="</div>"),html+="</div>",$(parent).html(html),$(parent).closest(".promo_wrapper_content").show(),$(parent).find("#productName").length>0&&$(".title-section h1")&&null!=$(".title-section h1").text()&&""!=$(".title-section h1").text()&&$(parent).find("#productName").text($(".title-section h1").text()),localStorage.getItem("jio_store_id")&&$(parent+" a").each((function(){var a_href=$(this).attr("href");if(-1===a_href.indexOf("?str_id=")){var str_id_str="?str_id="+localStorage.getItem("jio_store_id");$(this).attr("href",a_href+str_id_str)}})),$(parent+"_sec").show();var itemsLenght=$("."+parent_swipe).length;$(parent).find("."+parent_swipe).addClass("prod-swipe-"+itemsLenght),$(parent).find("."+next_elem).addClass("prod-right-"+itemsLenght),$(parent).find("."+prev_elem).addClass("prod-left-"+itemsLenght);var swiper=new Swiper("."+parent_swipe,{slidesPerView:"auto",spaceBetween:0,navigation:{nextEl:".prod-right-"+itemsLenght,prevEl:".prod-left-"+itemsLenght},on:{slideChangeTransitionEnd:function(){var gtmStatus="0";$("#gtm_status").length>0&&(gtmStatus=$("#gtm_status").val()),"1"==gtmStatus&&$(this.slides).each((function(index,element){if(1==isSlideInViewport(element)){var index=$($(element).closest(".swiper-container").find(".swiper-slide")).index($(element).closest(".swiper-slide")),slideId="";if($(element).attr("id")&&(slideId=$(element).attr("id")),""!=slideId&&-1===$.inArray(slideId,window.slideExists)){var type="product";window.slideExists.push(slideId),SwiperDataLayer(element,index,type)}}}))}}});applyPlusMinusButton(parent)}function getPromoAddonTotal(){var total_amount=parseInt(0);$("#elec_promo_addon_dialog .promo_ext_warranty_sku:checked").length>0&&(total_amount+=parseFloat($("#elec_promo_addon_dialog .promo_ext_warranty_sku:checked").attr("data-price"))),$("#elec_promo_addon_dialog .promo_add_on_sku:checked").each((function(){total_amount+=parseFloat($(this).attr("data-price"))})),total_amount=total_amount.toFixed(2),$("#elec_promo_addon_dialog .promo_add_on_total_amount").html("&#8377;"+total_amount)}function doorstepFinanceEligibility(prod_price=0){let userid=localStorage.getItem("userid"),authtoken=localStorage.getItem("authtoken");var dsf_status=!1;$("#doorstep_finance").length>0&&(dsf_status=$("#doorstep_finance").val());let selling_price=parseFloat(prod_price);if("true"==dsf_status)if($("#avail_doorstep_finance").show(),authtoken&&userid&&"0"!=userid)$.ajax({url:"/hcat/rest/v1/5g/checkeligible",headers:{userid:userid,authtoken:authtoken},method:"POST",async:!0,dataType:"JSON",contentType:"application/json",data:JSON.stringify({amount:selling_price}),success:function(resp){if(resp.status)if("fail"==resp.status&&"01"==resp.errCode){var dsf_today=new Date,checked;if(dsf_today.setMonth(dsf_today.getMonth()+3),localStorage.setItem("dsf_eligibility",dsf_today),$(".avail_dsf_status").hide(),$(".avail_dsf_check").show(),$(".doorstep-text").attr("data-dsf_status",!1),$("#5g_sim_required").length>0)SimStatus5g($("#5g_sim_required").prop("checked"))}else if("success"==resp.status){let checked,sku,obj={sim_needed:$("#5g_sim_required").prop("checked"),dsf_needed:!0},obj_str='{"'+$("#product_id").val()+'":'+JSON.stringify(obj)+"}";localStorage.setItem("5g_phone_info",obj_str),$(".avail_dsf_status").hide(),$(".avail_dsf_success").show(),$(".doorstep-text").attr("data-dsf_status",!0);let debit_emi_offers_html='<section class="avail_doorstep_finance" id="debit_emi_cashback_offers">\n                                <div class="avail_dsf">\n                                    <h1>Avail EMI on Debit Card</h1>\n                                    <div class="avail_dsf_content">Congratulations! You\'re Pre-Approved for Debit Card EMI</div>\n                                    <div class="knowmore_btn" id="debit_card_emi">VIEW OPTIONS</div>\n                                    <div class="clearfix"></div>\n                                </div>\n                            </section>';$("#debit_card_emi_box").html(debit_emi_offers_html)}},error:function(){var checked;$("#5g_sim_required").length>0&&SimStatus5g($("#5g_sim_required").prop("checked"));$(".avail_dsf_status").hide(),$(".avail_dsf_check").show(),$(".doorstep-text").attr("data-dsf_status",!1)}});else{var checked;if($("#5g_sim_required").length>0)SimStatus5g($("#5g_sim_required").prop("checked"));$(".avail_dsf_status").hide(),$(".avail_dsf_check").show(),$(".doorstep-text").attr("data-dsf_status",!1)}}function SimStatus5g(checked=!1){var mcat_dsfStatus=!1;let dsf_status=!1;$("#doorstep_finance").length>0&&(mcat_dsfStatus=$("#doorstep_finance").val()),mcat_dsfStatus&&($(".doorstep-text").length,null!=$(".doorstep-text").attr("data-dsf_status")&&(dsf_status=$(".doorstep-text").attr("data-dsf_status"))),1==checked?$(".cart-holder .cart_btn").hide():$(".cart-holder .cart_btn").show();let sku=$("#product_id").val(),obj={sim_needed:checked,dsf_needed:JSON.parse(dsf_status)},obj_str='{"'+sku+'":'+JSON.stringify(obj)+"}";localStorage.setItem("5g_phone_info",obj_str)}window.onload=function(){$("#pdp-skeleton").remove(),$("body").removeClass("pdp_overflow_hidden")},$(document).ready((function(){if(0==window.available_at_3p_seller&&$(".pdp_feedback_form").show(),$("#prod_rel_pincode").length>0)if(localStorage.getItem("nms_mgo_pincode"))$("#prod_rel_pincode").val(localStorage.getItem("nms_mgo_pincode"));else{var pincode=window.default_pin;$("#prod_rel_pincode").val(pincode)}$(".nms-star").each((function(){$(this).addClass("star-loaded");var value=$(this).attr("data-star");$(this).starrr({readOnly:!0,rating:value})}));var add_on_status=$("#add_on_status").val();"ELECTRONICS"==vertical_code&&1==add_on_status&&$("#elec_addon_dialog").modal({show:!1}),$(".cus-view-swiper").each((function(i,element){$(this).addClass("prod-swipe-"+i),$(this).parent().find(".swiper-cus-view-swiper-next").addClass("prod-right-"+i),$(this).parent().find(".swiper-cus-view-swiper-prev").addClass("prod-left-"+i);var swiper=new Swiper(".prod-swipe-"+i,{slidesPerView:"auto",spaceBetween:0,navigation:{nextEl:".prod-right-"+i,prevEl:".prod-left-"+i},on:{slideChangeTransitionEnd:function(){var gtmStatus="0";$("#gtm_status").length>0&&(gtmStatus=$("#gtm_status").val()),"1"==gtmStatus&&$(this.slides).each((function(index,element){if(1==isSlideInViewport(element)){var index=$($(element).closest(".swiper-container").find(".swiper-slide")).index($(element).closest(".swiper-slide")),slideId="";if($(element).attr("id")&&(slideId=$(element).attr("id")),$(element).attr("data-prod")&&""!=$(element).attr("data-prod")&&(slideId=$(element).attr("data-prod")),""!=slideId&&-1===$.inArray(slideId,window.slideExists)){var type="product";window.slideExists.push(slideId),SwiperDataLayer(element,index,type)}}}))}}})}));var galleryThumbs=new Swiper(".gallery-thumbs",{spaceBetween:0,direction:"vertical",slidesPerView:"auto",freeMode:!0,watchSlidesVisibility:!0,watchSlidesProgress:!0,navigation:{nextEl:".swiper-gallery-thumbs-next",prevEl:".swiper-gallery-thumbs-prev"}}),galleryTop=new Swiper(".gallery-top",{slidesPerView:1,spaceBetween:0,thumbs:{swiper:galleryThumbs}}),swiper=new Swiper(".similar_products_swiper",{slidesPerView:"auto",spaceBetween:0,navigation:{nextEl:".similar-swiper-button-next",prevEl:".similar-swiper-button-prev"},on:{slideChangeTransitionEnd:function(){var gtmStatus="0";$("#gtm_status").length>0&&(gtmStatus=$("#gtm_status").val()),"1"==gtmStatus&&$(this.slides).each((function(index,element){if(1==isSlideInViewport(element)){var index=$($(element).closest(".swiper-container").find(".swiper-slide")).index($(element).closest(".swiper-slide")),slideId="";if($(element).attr("id")&&(slideId=$(element).attr("id")),$(element).attr("data-prod")&&""!=$(element).attr("data-prod")&&(slideId=$(element).attr("data-prod")),""!=slideId&&-1===$.inArray(slideId,window.slideExists)){var type="product";window.slideExists.push(slideId),SwiperDataLayer(element,index,type)}}}))}}}),swiper=new Swiper(".bought_together_swiper",{slidesPerView:"auto",spaceBetween:0,navigation:{nextEl:".freq-swiper-button-next",prevEl:".freq-swiper-button-prev"},on:{slideChangeTransitionEnd:function(){var gtmStatus="0";$("#gtm_status").length>0&&(gtmStatus=$("#gtm_status").val()),"1"==gtmStatus&&$(this.slides).each((function(index,element){if(1==isSlideInViewport(element)){var index=$($(element).closest(".swiper-container").find(".swiper-slide")).index($(element).closest(".swiper-slide")),slideId="";if($(element).attr("id")&&(slideId=$(element).attr("id")),$(element).attr("data-prod")&&""!=$(element).attr("data-prod")&&(slideId=$(element).attr("data-prod")),""!=slideId&&-1===$.inArray(slideId,window.slideExists)){var type="product";window.slideExists.push(slideId),SwiperDataLayer(element,index,type)}}}))}}});$(".druginfo_tab").click((function(){if(!$(this).hasClass("active")){$(".druginfo_cont").fadeOut(),$(".druginfo_cont").hide();var dataid=$(this).attr("data-id");if($("#"+dataid).fadeIn(),$("#"+dataid).show(),$(".druginfo_tab").removeClass("active"),$(this).addClass("active"),"np_tab2"==dataid)var druginnerSwipe=new Swiper(".drup-info-swip-inner",{slidesPerView:"auto",spaceBetween:0,freeMode:!0});if("np_tab5"==dataid)var druginnerSwipe=new Swiper(".drup-info-swip-inner2",{slidesPerView:"auto",spaceBetween:0,freeMode:!0});if("np_tab6"==dataid)var druginnerSwipe=new Swiper(".drup-info-swip-inner3",{slidesPerView:"auto",spaceBetween:0,freeMode:!0})}})),$(".subinner-tab").click((function(){if(!$(this).hasClass("active")){var parent_id=$(this).closest(".druginfo_cont").attr("id");$("#"+parent_id+" .subinner-cont").hide();var dataid=$(this).attr("data-id");$("#"+dataid).fadeIn(),$("#"+dataid).show(),$("#"+parent_id+" .subinner-tab").removeClass("active"),$(this).addClass("active")}}));var price=$("#selling_price_val").val(),vertical_code=$("#vertical_code").val();$("#prod_delivery_details").length>0&&$.ajax({url:domain_url+"catalog/review/get_delivery_message",method:"GET",data:{price:price,vertical:vertical_code},dataType:"HTML",success:function(resp){$("#prod_delivery_details").html(resp)},error:function(){}})})),$(document).on("click","#write_review_btn",(function(ev){ev.preventDefault(),$("#rate_review_form").modal("show")})),$("#rate_review_form").on("show.bs.modal",(function(e){if(0!=localStorage.getItem("userid")&&null!=localStorage.getItem("userid"));else{e.preventDefault(),e.stopPropagation();var url,path=(new Url).path;localStorage.setItem("redirectUrl",path),window.location.href="/customer/account/login"}})),$(document).on("click","#rating_holder",(function(){$("html, body").animate({scrollTop:$("#pro_review").offset().top-300},1e3)})),$(".product-cart-form").submit((function(ev){ev.preventDefault(),addToCart($(this),"cartbag")})),$(document).on("click",".star-popup a",(function(){var star=$(".star-popup a").index($(this));star=parseInt(star)+1,$("#star_holder").attr("data-star",star),$("#rate_review_form").modal("show")})),$("#rate_review_form").on("shown.bs.modal",(function(){$("#star_holder").html('<div class="starrr nms-rate rating-stars"></div>');var star=$("#star_holder").attr("data-star");$("#rating_value").val(star),$(".nms-rate").starrr({rating:star,change:function(ev,value){$("#rating_value").val(value),$("#rating_value").valid()}})})),$("#rate_review_form").on("hidden.bs.modal",(function(){$("#rating_value").val(""),$("#star_holder").attr("data-star",""),$("#star_holder").html('<div class="starrr nms-rate rating-stars"></div>'),$("#review_product").trigger("reset"),$("#review_product").data("validator").resetForm(),$("#review_form").show(),$("#review_response_div").text("").hide()})),$.validator.addMethod("required-rating",(function(value){return!!parseInt(value)}),"Please select your rating!"),$.validator.addMethod("required-name",(function(value){return!!value}),"Please enter your Name!"),$.validator.addMethod("required-title",(function(value){return!!value}),"Please enter Title!"),$.validator.addMethod("required-detail",(function(value){return!!value}),"Please enter Detail!"),$("#review_product").validate({ignore:[],submitHandler:function(form){var api_url=$("#mstar_api_baseurl").val();$.ajax({url:api_url+"entity/customer/get_details",method:"GET",data:{},headers:{userid:localStorage.getItem("userid"),authtoken:localStorage.getItem("authtoken")},dataType:"JSON",success:function(resp){resp.status&&"success"==resp.status?($("#review_product").find("#customer_id").val(localStorage.getItem("userid")),$.ajax({url:domain_url+"catalog/review_add/add",method:"POST",data:$("#review_product").serialize(),dataType:"JSON",success:function(resp){$("#review_form").hide(),$("#review_response_div").text(resp.message).show(),$("#review_product").trigger("reset"),$("#review_product").data("validator").resetForm()},error:function(){$("#review_form").hide(),$("#review_response_div").text("Unable to connect to server").show()}})):($("#review_form").hide(),$("#review_response_div").text("Please login to post your review.").show())},error:function(){$("#review_form").hide(),$("#review_response_div").text("Please login to post your review.").show()}})}}),$("#show_more_review").click((function(){$("#show_more_review").prop("disabled",!0);var sku=$(this).attr("data-sku"),page=$(this).attr("data-page"),limit=$(this).attr("data-limit"),total=$(this).attr("data-total");$.ajax({url:domain_url+"catalog/review/get",data:{sku:sku,page:page,limit:limit},method:"GET",dataType:"HTML",success:function(resp){var loaded_review;if($("#show_more_review").prop("disabled",!1),$("#review_holder").append(resp),$("#review_holder .review-box").length==total)$("#show_more_review").remove();else{var page=$("#show_more_review").attr("data-page");page=parseInt(page)+1,$("#show_more_review").attr("data-page",page)}$(".nms-star").each((function(){if($(this).hasClass("star-loaded"));else{$(this).addClass("star-loaded");var value=$(this).attr("data-star");$(this).starrr({readOnly:!0,rating:value})}}))},error:function(){$("#show_more_review").prop("disabled",!1)}})})),$(document).ready((function(){var first_desc,second_desc,third_desc,fourth_desc,fourth_desc,fourth_desc,fourth_desc,eight_desc,ninth_desc;$("#first_desc").length>0&&($("#first_desc").height()>100&&($("#first_desc").addClass("less_content"),$("#first_desc").after("<div class='toggle-btn show' data-target='first'>See more</div>")));$("#second_desc").length>0&&($("#second_desc").height()>100&&($("#second_desc").addClass("less_content"),$("#second_desc").after("<div class='toggle-btn show' data-target='second'>See more</div>")));$("#third_desc").length>0&&($("#third_desc").height()>100&&($("#third_desc").addClass("less_content"),$("#third_desc").after("<div class='toggle-btn show' data-target='third'>See more</div>")));$("#fourth_desc").length>0&&((fourth_desc=$("#fourth_desc").height())>100&&($("#fourth_desc").addClass("less_content"),$("#fourth_desc").after("<div class='toggle-btn show' data-target='fourth'>See more</div>")));$("#fifth_desc").length>0&&((fourth_desc=$("#fifth_desc").height())>100&&($("#fifth_desc").addClass("less_content"),$("#fifth_desc").after("<div class='toggle-btn show' data-target='fifth'>See more</div>")));$("#sixth_desc").length>0&&((fourth_desc=$("#sixth_desc").height())>100&&($("#sixth_desc").addClass("less_content"),$("#sixth_desc").after("<div class='toggle-btn show' data-target='sixth'>See more</div>")));$("#seventh_desc").length>0&&((fourth_desc=$("#seventh_desc").height())>100&&($("#seventh_desc").addClass("less_content"),$("#seventh_desc").after("<div class='toggle-btn show' data-target='seventh'>See more</div>")));$("#eight_desc").length>0&&($("#eight_desc").height()>100&&($("#eight_desc").addClass("less_content"),$("#eight_desc").after("<div class='toggle-btn show' data-target='eight'>See more</div>")));$("#ninth_desc").length>0&&($("#ninth_desc").height()>100&&($("#ninth_desc").addClass("less_content"),$("#ninth_desc").after("<div class='toggle-btn show' data-target='ninth'>See more</div>")))})),$(document).on("click",".toggle-btn.show",(function(){var target=$(this).attr("data-target");if("undefined"!=typeof PurelyGtmEvents&&$("body").hasClass("otc-product-page")){var event="event_pdp_action",category="pdp",product_ID="",rating="",action="",label="";$(this).parents("#fea_details").length>0&&"Description"==$(this).closest("#fea_details").find("h1").text()&&(action="know more clicked",label="pdp_know_more_description_clicked"),$("#product_id").length>0&&(product_ID=$("#product_id").val()),""!=label&&PurelyGtmEvents(event,"pdp",action,label,product_ID,"")}$("#"+target+"_desc").removeClass("less_content"),$("#"+target+"_title").after("<div class='toggle-btn hide' data-target='"+target+"'>See less</div>"),$(this).remove()})),$(document).on("click",".toggle-btn.hide",(function(){var target=$(this).attr("data-target");$("#"+target+"_desc").addClass("less_content"),$("#"+target+"_desc").after("<div class='toggle-btn show' data-target='"+target+"'>See more</div>"),$(this).remove()})),$(document).ready((function(){get_product_price(),get_recommendations()})),$(document).on("click",".offers_viewall",(function(){let text=$(this).text(),parent=$(this).attr("data-parent");$("#"+parent+" .offer_details").hasClass("less-content")?$(this).appendTo("#"+parent+" h1"):$(this).appendTo("#"+parent),$("#"+parent+" .offer_details").toggleClass("less-content"),$(this).text("See More"==text?"See Less":"See More")})),$(document).on("click","#jio_onepay_offers .toggle-btn",(function(){$("#jio_onepay_offers .offer_details").toggleClass("less-content");let text=$(this).text(),parent=$(this).attr("data-parent");"SEE MORE"==text?($(this).appendTo("#"+parent+" h1"),$(this).text("SEE LESS")):($(this).appendTo("#"+parent),$(this).text("SEE MORE"))})),$(document).on("click","#emi_btn",(function(){$("#emi_plans_dialog").modal("show")})),$(document).on("click",".open_emi_popup",(function(){$("#emi_plans_dialog").modal("show")})),$(document).on("click","#debit_card_emi",(function(){$("#debit_emi_plans_dialog").hasClass("empty")&&(get_debit_card_emi(),$("#debit_emi_plans_dialog").removeClass("empty")),$("#debit_emi_plans_dialog").modal("show")})),$(document).on("click","#emi_disclaim_close",(function(){$(".emi_disclaimer").remove();var win_height=$(window).height()-50;$("#emi_dialog_content").css("height",win_height)})),$("#prod_pin_form").submit((function(ev){ev.preventDefault();var pincode=$("#prod_rel_pincode").val(),pinregex,valid=/^[0-9]{6}$/.test(pincode);if($("#detect_location_msg").text(""),""==pincode)$("#prod_pin_msg").addClass("form-error").html("Enter your pincode");else if(valid){var pincode_api=$("#fynd_api_url").val(),phone_no="0";if(0!=localStorage.getItem("userid")&&null!=localStorage.getItem("userid")){var authtoken=localStorage.getItem("authtoken"),userid=localStorage.getItem("userid"),domain_url,get_user_api=$("#mstar_api_baseurl").val()+"entity/customer/get_details";$.ajax({url:get_user_api,data:{},headers:{userid:userid,authtoken:authtoken},method:"GET",dataType:"JSON",async:!1,success:function(resp){"success"==resp.status&&resp.result.your_details.mobile_no&&(phone_no=resp.result.your_details.mobile_no)},error:function(){}})}var lat=parseFloat(0),lon=parseFloat(0),head_pin=localStorage.getItem("nms_mgo_pincode"),lat=parseFloat(0),lon=parseFloat(0),head_pin;if(localStorage.getItem("nms_mgo_pincode")!=pincode){var mstar_pin_api=$("#mst_api_cart_pin_baseurl").val();$.ajax({url:mstar_pin_api+"pin/"+pincode,method:"GET",dataType:"JSON",async:!1,success:function(resp){if("success"==resp.status){var result=resp.result,master_codes=result.master_codes,supported=!1;for(vertical in master_codes)null!=master_codes[vertical]&&(supported=!0);if(1==supported){var lat=0,lon=0;result.lat&&0!=result.lat&&(lat=result.lat,localStorage.setItem("jio_addr_lat",lat)),result.lon&&0!=result.lon&&(lon=result.lon,localStorage.setItem("jio_addr_lon",lon)),0!=lat&&0!=lon||getLatLonAPI(pincode)}}},error:function(){var lat=0,lon=0;localStorage.setItem("jio_addr_lat",0),localStorage.setItem("jio_addr_lon",0)}})}localStorage.getItem("jio_addr_lat")&&(lat=parseFloat(localStorage.getItem("jio_addr_lat"))),localStorage.getItem("jio_addr_lon")&&(lon=parseFloat(localStorage.getItem("jio_addr_lon")));var locked_phone=!1;if(localStorage.getItem("lock_options")){var sku=$("#product_id").val(),locked_obj=JSON.parse(localStorage.getItem("lock_options"));locked_obj.product_code&&locked_obj.product_code==sku&&(locked_phone=!0)}var ajax_data={identifier:create_UUID(),to_pincode:pincode,customer_details:{phone_number:phone_no,pincode:pincode,coordinates:{lat:lat,long:lon}},articles:[{article_id:$("#alt_sku").val(),vertical:$("#vertical_code").val(),lookup_inventory:window.is_always_available,tenant_ids:window.tenant_id,merchant_id:window.merchant_id,channel_id:window.channel_id,available_at_3p_seller:window.available_at_3p_seller,available_at_1p_kirana:window.available_at_1p_kirana,available_at_rrl_fc:window.available_at_rrl_fc,available_at_rrl_store:window.available_at_rrl_store,available_at_3p_kirana:window.available_at_3p_kirana,delivery_type:window.hd_flag,locked_phone:locked_phone,transport_mode:null!=window.mode_of_transport&&""!=window.mode_of_transport?window.mode_of_transport.toLowerCase():null,package_dimension:window.package_dimension,is_liquid:window.is_liquid,is_hazmat:window.is_hazmat,is_fragile:window.is_fragile}]};void 0!==window.pre_order&&(ajax_data.articles[0].pre_order=window.pre_order,ajax_data.articles[0].procurement_date=window.procurement_date),$.ajax({url:pincode_api,type:"POST",dataType:"JSON",data:JSON.stringify(ajax_data),contentType:"application/json",headers:{"X-OMS-Application-ID":atob(window.fynd_app_id),"X-Application-Token":atob(window.fynd_token)},success:function(resp){if(1==resp.success){if(resp.articles[0]){var expected_del=resp.shipments[0].display_message;$("#prod_pin_form .del_txt").remove(),$("#prod_pin_msg").removeClass().addClass("form-success").html(expected_del)}}else{var message=resp.error.message;$("#prod_pin_form .del_txt").remove(),$("#prod_pin_msg").removeClass().addClass("form-error").html(message)}},error:function(xhr,status,error){var resp=xhr.responseJSON;$("#prod_pin_form .del_txt").remove(),$("#prod_pin_msg").removeClass().addClass("form-error").html("Unable to fetch delivery details")}})}else $("#prod_pin_form .del_txt").remove(),$("#prod_pin_msg").html("Invalid pincode")})),$(document).on("click",".add-on-skip",(function(){var source;"addtocart"==$("#elec_addon_dialog").attr("data-source")?$("#elec_addon_dialog").modal("hide"):localStorage.getItem("buynowdata")?window.location.href="/customer/account/login":(get_cart_details(!1),window.location.href="/checkout/review")})),$("#elec_addon_dialog").on("shown.bs.modal",(function(){$(".ext_warranty_sku,.add_on_sku").each((function(){$(this).prop("checked",!1)})),getAddonTotal()})),$("#elec_addon_dialog").on("hidden.bs.modal",(function(){$(".buynowbtn").attr("data-source","")})),$(".ext_warranty_sku,.add_on_sku").change((function(){$(".ext_warranty_sku:checked").length>0||$(".add_on_sku:checked").length>0?($(".add-on-submit").prop("disabled",!1),$(".add-on-submit").removeClass("disabled")):($(".add-on-submit").prop("disabled",!0),$(".add-on-submit").addClass("disabled")),getAddonTotal()})),$(window).on("load",(function(){if("1"==window.promotion_call_status){var sku=$("#product_id").val(),verticalCode=$("#vertical_code").val(),zipcode=window.default_pin;localStorage.getItem("nms_mgo_pincode")&&(zipcode=localStorage.getItem("nms_mgo_pincode"));var option_code="",headerdata={pin:zipcode,"vertical-code":verticalCode,"option-code":""};localStorage.getItem("jio_store_id")&&(headerdata.pickupstore=localStorage.getItem("jio_store_id")),$.ajax({url:domain_url+"catalog/promotions/"+sku,method:"GET",data:{},headers:headerdata,dataType:"JSON",success:function(resp){if("success"==resp.status){if(resp.promotions.length>0)for($("#promotion_content_holder").html(""),i=0;i<resp.promotions.length;i++){var promo_html=resp.promotions[i],long_html=$($.parseHTML(promo_html)).filter("#promo_long_content").html();$("#promotion_content_holder").append(long_html)}else $("#promotion_content_holder").remove();resp.hasOwnProperty("best_deals_promo")&&null!=resp.best_deals_promo&&(resp.best_deals_promo.hasOwnProperty("bsdl")&&Object.keys(resp.best_deals_promo.bsdl).length>0&&resp.best_deals_promo.hasOwnProperty("bsdl_header")&&Object.keys(resp.best_deals_promo.bsdl_header).length>0&&resp.best_deals_promo.bsdl_header.hasOwnProperty("status")&&"1"==resp.best_deals_promo.bsdl_header.status&&bind_deals_products_html("#pdp_best_deals_products","pdp_best_deals",resp.best_deals_promo.bsdl,verticalCode,resp.best_deals_promo.bsdl_header),resp.best_deals_promo.hasOwnProperty("bundle")&&Object.keys(resp.best_deals_promo.bundle).length>0&&resp.best_deals_promo.hasOwnProperty("bundle_header")&&Object.keys(resp.best_deals_promo.bundle_header).length>0&&resp.best_deals_promo.bundle_header.hasOwnProperty("status")&&"1"==resp.best_deals_promo.bundle_header.status&&bind_deals_products_html("#pdp_bundle_deals_products","pdp_bundle_deals",resp.best_deals_promo.bundle,verticalCode,resp.best_deals_promo.bundle_header))}else $("#promotion_content_holder").remove()},error:function(){$("#promotion_content_holder").remove()}})}})),$(document).ready((function(){wishlistButton()})),$(document).on("click","#wishlist_btn",(function(ev){if(ev.preventDefault(),localStorage.getItem("userid")&&"0"!=localStorage.getItem("userid")){var action;callWishlistApi($(this).attr("data-action"))}else{var url=new Url,path=url.path,query=url.query;query&&(path=path+"?"+query),path&&localStorage.setItem("redirectUrl",path),window.location.href="/customer/account/login"}})),$(document).on("click","#toggle_all_services",(function(){$(this).text("See More"==$(this).text()?"See Less":"See More"),$(".pdp_elec_serv_content").toggle()})),$(document).on("click",".emi-nav-link",(function(ev){ev.preventDefault(),$(".emi-nav-link").parent().removeClass("active"),$(this).parent().addClass("active");let href=$(this).attr("href");$(".emi_table_details").hide(),$("#"+href).show()})),$(document).on("click",".nav-link",(function(ev){let elem=$(this).attr("href");$(elem).find(".emi-nav-link").first().trigger("click")})),$(document).ready((function(){if(null!=localStorage.getItem("dsf_eligibility")){var dsf_expiry=localStorage.getItem("dsf_eligibility"),dsf_today=new Date,dsf_expiry_date=new Date(dsf_expiry),checked;if(dsf_today.getTime()<dsf_expiry_date.getTime())if($(".avail_dsf_status").hide(),$(".avail_dsf_check").show(),$(".doorstep-text").attr("data-dsf_status",!1),$("#5g_sim_required").length>0)SimStatus5g($("#5g_sim_required").prop("checked"))}if($("#copy_alt_sku").length>0){let sku_clipboard;new ClipboardJS("#copy_alt_sku").on("success",(function(e){notify("Copied!")}))}if($(".pdp_feedback_form").length>0){$(".terms_error").hide(),$("#reported_issue-error, #brief_note-error, #terms-error").remove();var name="";localStorage.getItem("displayname")&&(name=localStorage.getItem("displayname"));var email="";localStorage.getItem("displayemail")&&(email=localStorage.getItem("displayemail")),$(".pdp_feedback_form #fullname").val(name),$(".pdp_feedback_form #email").val(email),$.validator.addMethod("Required-feedback",(function(value){return!!value}),"Please Enter Brief Note!"),$.validator.addMethod("validate-alphanumericspace",(function(a){var b;return!!/^[0-9a-zA-Z\-.,?&@%!()'\"\s ]+$/.test(a)}),"Your Brief Note must contain only alphabets and numbers!"),$("#report_feedback").validate({ignoreTitle:!0,errorElement:"div",errorClass:"form_error",rules:{reported_issue:"required",terms:"required"},messages:{reported_issue:" Please Select Issue Type",terms:"Please agree with the Terms & Conditions"},errorPlacement:function(error,element){"terms"==element.attr("name")?($(".terms_error").append(error),$(".terms_error").show()):error.insertAfter(element)},submitHandler:function(){$(".terms_error").hide(),$("#reported_issue-error, #brief_note-error, #terms-error").remove(),$("#form_submit").prop("disabled",!0);var feedback_obj={title:null!=$("#reported_issue > option:selected").text()&&""!=$("#reported_issue > option:selected").text()?$("#reported_issue > option:selected").text():"",ticket_details:$("#brief_note").val(),disposition_id:null!=$("#reported_issue > option:selected").val()&&""!=$("#reported_issue > option:selected").val()?parseInt($("#reported_issue > option:selected").val()):"",product_id:null!=$("#product_id").val()&&""!=$("#product_id").val()?parseInt($("#product_id").val()):"",pincode:null!=localStorage.getItem("nms_mgo_pincode")&&""!=localStorage.getItem("nms_mgo_pincode")?parseInt(localStorage.getItem("nms_mgo_pincode")):""};$("#feedform_submit_api").length>0&&null!=$("#feedform_submit_api").val()&&""!=$("#feedform_submit_api").val()&&$.ajax({url:$("#feedform_submit_api").val(),type:"POST",data:JSON.stringify(feedback_obj),dataType:"JSON",headers:{userid:localStorage.getItem("userid"),authtoken:localStorage.getItem("authtoken"),pdp_link:window.location.href},contentType:"application/json",success:function(response){"success"==response.status?($("#feedback_report_popup").modal("hide"),notify("Thanks for your feedback","success")):($("#form_submit").prop("disabled",!1),$("#feedback_report_popup").modal("hide"),notify("Error occurred. Try again later.","danger"))},error:function(){$("#form_submit").prop("disabled",!1),$("#feedback_report_popup").modal("hide"),notify("Error occurred. Try again later.","danger")}})}}),$("#feedback_report_popup").on("shown.bs.modal",(function(e){$("#feedback_report_popup #form_submit").prop("disabled",!1),$("#report_feedback")[0].reset(),$(".terms_error").hide(),$("#reported_issue").removeClass("active");var height=$(window).height()-50;$("#feedback_report_popup .modal-content").css("height",height),$("#feedback_report_popup .modal-content").css("overflow-y","scroll")})),$("#feedback_report_popup").on("hidden.bs.modal",(function(e){$("#reported_issue").removeClass("active")})),$("form#report_feedback").on("reset",(function(event){$(".terms_error").hide(),$("#reported_issue-error, #brief_note-error, #terms-error").remove(),$("#feedback_report_popup #form_submit").prop("disabled",!1)}))}})),$(document).on("click tap",".feedback_link",(function(e){if($(".otc-product-page #product_id").length>0){if(e.preventDefault(),null==localStorage.getItem("userid")||null==localStorage.getItem("userid")||"0"==localStorage.getItem("userid")){e.stopPropagation();var url,path=(new Url).path;return localStorage.setItem("redirectUrl",path),window.location.href="/customer/account/login",!1}if($("#report_feedback")[0].reset(),$("#feedback_report_popup #form_submit").prop("disabled",!1),$("#feedform_category_api").length>0&&null!=$("#feedform_category_api").val()&&""!=$("#feedform_category_api").val())if($("#feedback_report_popup select  > option").length>1)null!=window.feedback_categories&&$("#feedback_report_popup").modal({show:!0,backdrop:"static"});else{var dataURL=$("#feedform_category_api").val();$.ajax({url:dataURL,method:"GET"}).done((function(response){response&&response.status&&"success"==response.status&&(window.feedback_categories=response,surveyCategories(window.feedback_categories),$("#feedback_report_popup").modal({show:!0,backdrop:"static"}))})).fail((function(error){window.feedback_categories=null}))}}})),$(document).on("click tap",".feedback_close, #cancel_submit",(function(e){$(".otc-product-page #product_id").length>0&&(e.preventDefault(),$("#report_feedback input").blur(),$("#report_feedback")[0].reset(),$("#feedback_report_popup").modal("hide"))})),$("#reported_issue").on("mousedown",(function(){$("#reported_issue").hasClass("active")?$("#reported_issue").removeClass("active"):$("#reported_issue").addClass("active")})),$(document).on("click tap",(function(event){$(event.target).is("#reported_issue")||$("#reported_issue").removeClass("active")})),$("#reported_issue").on("change",(function(event){$("#reported_issue").removeClass("active")})),$(document).on("change","#5g_sim_required",(function(){let checked=$(this).prop("checked");void 0!==SimStatus5g&&SimStatus5g(checked)})),$(document).on("click tap",".bestdeals_toggle",(function(e){$(this).closest(".pdp_deals_promo").find(".bestdeals_content").is(":visible")?($(this).removeClass("active"),$(this).closest(".pdp_deals_promo").find(".bestdeals_content").css({display:"none"})):($(this).addClass("active"),$(this).closest(".pdp_deals_promo").find(".bestdeals_content").css({display:"block"}))})),$(document).on("click","#elec_promo_addon_dialog .promo-add-on-skip",(function(){var source;"addtocart"==$("#elec_promo_addon_dialog").attr("data-source")&&$("#elec_promo_addon_dialog").modal("hide")})),$(document).on("shown.bs.modal","#elec_promo_addon_dialog",(function(){$("body").addClass("promo_modal"),$("#elec_promo_addon_dialog .promo_ext_warranty_sku, #elec_promo_addon_dialog .promo_add_on_sku").each((function(){$(this).prop("checked",!1)})),getPromoAddonTotal()})),$(document).on("hidden.bs.modal","#elec_promo_addon_dialog",(function(){$("body").removeClass("promo_modal")})),$(document).on("change","#elec_promo_addon_dialog .promo_ext_warranty_sku, #elec_promo_addon_dialog .promo_add_on_sku",(function(){$("#elec_promo_addon_dialog .promo_ext_warranty_sku:checked").length>0||$("#elec_promo_addon_dialog .promo_add_on_sku:checked").length>0?($("#elec_promo_addon_dialog .promo-add-on-submit").prop("disabled",!1),$("#elec_promo_addon_dialog .promo-add-on-submit").removeClass("disabled")):($("#elec_promo_addon_dialog .promo-add-on-submit").prop("disabled",!0),$("#elec_promo_addon_dialog .promo-add-on-submit").addClass("disabled")),getPromoAddonTotal()})),$(window).on("load",(function(){var checked;$("#5g_sim_required").length>0&&SimStatus5g($("#5g_sim_required").prop("checked"))}));