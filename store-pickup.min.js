window.onload=function(){$("#jiomart_fullpage_load").remove(),$("body").removeClass("home_overflow_hidden")};var st_page=1,fetchMore=!0;function timeConv24(time24){var ts=time24,H=+ts.substr(0,2),h=H%12||12,ampm=H<12?" AM":" PM";return ts=(h=h<10?"0"+h:h)+ts.substr(2,3)+ampm}function bind_store_details(data,is_popup){var stores_html="",store_count=0,stores=data.stores;if(stores&&stores.length)for(p=0;p<stores.length;p++){store_count++;var store=stores[p],is_checked=!1;if(0==is_popup){var is_checked=localStorage.getItem("jio_store_id")==store.store_id;null==localStorage.getItem("jio_store_id")&&0==p&&(is_checked=!0),1==is_checked&&$("#sel_store_name").text(store.name)}else 1==is_popup&&0==p&&(is_checked=!0);timing_html="",store.timing&&Object.keys(store.timing).length>0&&(timing_html=Object.keys(store.timing).map((function(day,obj){var day_uc,open_time,close_time;return`<li>${day.charAt(0).toUpperCase()+day.slice(1)} : ${timeConv24(store.timing[day].opening_time)} - ${timeConv24(store.timing[day].closing_time)}</li>`})).join("")),stores_html+=`\n            <div class="swiper-slide" data-storeid="${store.store_id}">\n                <div class="store_address">\n                    <div>\n                        <input id="str_radio_${store.store_id}" class="store_pickup_id radio-custom" name="store_id_rdo" type="radio" ${is_checked?"checked":""}>\n                        <label for="str_radio_${store.store_id}" class="radio-custom-label">${store.name}</label>\n                    </div>\n                    <p>${store.address.address1},${store.address.address2},${store.address.city} ${store.address.pincode},${store.address.state}</p><ul style="list-style:none;line-height:24px;">${timing_html}</ul>\n                </div>\n            </div>`}0==store_count?($("#store_count").html("No store available"),0==is_popup?($("#sel_store_name").text("No store available"),$("#sel_store_time").remove()):$("#store_count,.pickup-swipe").hide()):($("#store_count").html(`${store_count} store available`),1==is_popup&&$("#store_count,.pickup-swipe").show()),$("#store_box").html(stores_html)}function get_section_details(page_no){var page_slug="/cms/ajax/get_data/store-pickup",pincode=window.default_pin;localStorage.getItem("nms_mgo_pincode")&&(pincode=localStorage.getItem("nms_mgo_pincode"));var storecode="";if(localStorage.getItem("jio_store_id"))storecode=localStorage.getItem("jio_store_id");else if(localStorage.getItem("jio_pickup_stores")){var data,stores=JSON.parse(localStorage.getItem("jio_pickup_stores")).stores;stores&&stores.length&&stores.length>0&&(storecode=stores[0].store_id)}$.ajax({url:page_slug+"/"+page_no,method:"GET",data:{},headers:{pin:pincode,pickupstoreid:storecode},dataType:"HTML",success:function(resp){if(""!=resp){$(".jiomart_load").remove(),$("#dynamic_page_load_more").append(resp);var total_pages=$("#dynamic_page_load_more .jiomart_maincontent").attr("data-totalpages");$("#dynamic_page_load_more").attr("data-pages",total_pages),localStorage.getItem("jio_store_id")&&$("#dynamic_page_load_more a").each((function(){var a_href=$(this).attr("href");if(-1===a_href.indexOf("?str_id=")&&-1===a_href.indexOf("&str_id=")){if(-1===a_href.indexOf("?"))var str_id_str="?str_id="+localStorage.getItem("jio_store_id");else var str_id_str="&str_id="+localStorage.getItem("jio_store_id");$(this).attr("href",a_href+str_id_str)}})),"undefined"!=typeof giftProductList&&giftProductList(),applyPlusMinusButton(),apply_pickup_swiper(),$("#jiomart_fullpage_load").remove(),st_page++,fetchMore=!0}},error:function(){$("#jiomart_fullpage_load").remove()}})}function apply_pickup_swiper(){$(".top_banner").each((function(i,element){if($(this).hasClass("swiper-container-initialized"));else{$(this).addClass("top-banner-swipe-"+i),$(this).find(".swiper-pagination").addClass("swiper-home-pagination-"+i);var swiper=new Swiper(".top-banner-swipe-"+i,{slidesPerView:"auto",spaceBetween:0,autoplay:{delay:5e3,disableOnInteraction:0},pagination:{el:".swiper-home-pagination-"+i,clickable:!0},on:{slideChange:function(){var gtmStatus="0";$("#gtm_status").length>0&&(gtmStatus=$("#gtm_status").val()),"1"==gtmStatus&&$(this.slides[this.activeIndex]).each((function(index,element){if(1==elementViewport(element)){var index=$($(element).closest(".swiper-container").find(".swiper-slide")).index($(element).closest(".swiper-slide")),slideId="";if($(element).attr("id")&&(slideId=$(element).attr("id")),$(element).attr("data-id")&&(slideId=$(element).find("img").attr("data-id")),""!=slideId&&-1===$.inArray(slideId,window.slideExists)){var type="banner_img";window.slideExists.push(slideId),SwiperDataLayer(element,index,type)}}}))}}})}}));var swiper=new Swiper(".new_arrival_swiper",{slidesPerView:"auto",spaceBetween:0,on:{slideChangeTransitionEnd:function(){var gtmStatus="0";$("#gtm_status").length>0&&(gtmStatus=$("#gtm_status").val()),"1"==gtmStatus&&$(this.slides).each((function(index,element){if(1==isSlideInViewport(element)){var index=$($(element).closest(".swiper-container").find(".swiper-slide")).index($(element).closest(".swiper-slide")),slideId="";if($(element).attr("id")&&(slideId=$(element).attr("id")),""!=slideId&&-1===$.inArray(slideId,window.slideExists)){var type="product";window.slideExists.push(slideId),SwiperDataLayer(element,index,type)}}}))}}})}function get_available_stores(pincode,is_popup){var ajax_data={type:"store_pickup"};ajax_data.pincode=pincode,$.ajax({url:window.storepickup.api_url,method:"POST",dataType:"JSON",async:!1,headers:{Authorization:"Basic "+window.storepickup.auth},data:ajax_data,success:function(resp){if("success"==resp.status&&resp.result&&resp.result.data&&resp.result.data[0]){var data=resp.result.data[0],stores,store_count=data.stores.length;0==is_popup?(localStorage.setItem("jio_pickup_stores",JSON.stringify(data)),localStorage.setItem("is_pickup_supported","1"),$(".delivery_store_pickup").show()):localStorage.setItem("jio_pickup_formdata",JSON.stringify(data)),0==store_count?0==is_popup?($(".delivery_store_pickup").hide(),localStorage.setItem("is_pickup_supported","0")):($("#pickup_submit").prop("disabled",!0),$("#pickup_pin_msg").removeClass().addClass("form-error").text("Store pickup is not available for this location. Try another pincode")):1==is_popup&&$("#pickup_submit").prop("disabled",!1)}},error:function(error,st){}})}function handlePickupFormSubmit(store_id){var data=[];if(localStorage.getItem("jio_pickup_formdata")&&(data=JSON.parse(localStorage.getItem("jio_pickup_formdata")),localStorage.setItem("jio_pickup_stores",JSON.stringify(data)),localStorage.removeItem("jio_pickup_formdata")),localStorage.getItem("jio_pickup_stores")&&(data=JSON.parse(localStorage.getItem("jio_pickup_stores"))),data.stores&&data.stores.length>0){if(0==store_id){var stores,store_id=data.stores[0].store_id;localStorage.setItem("jio_store_id",store_id)}localStorage.setItem("is_pickup_supported","1");var pincode=data.pincode,set_pincode;pincode!=localStorage.getItem("nms_mgo_pincode")&&getCityDetails(pincode,!0,!1,!1,!1),pincodePurelyGtmEvents(),window.location.href="/store-pickup/"+store_id}}$(document).ready((function(){if(localStorage.removeItem("jio_pickup_formdata"),!$("body").hasClass("cms-home")&&localStorage.getItem("jio_store_id")&&$("body a").each((function(){var str_id_str="?str_id="+localStorage.getItem("jio_store_id"),a_href=$(this).attr("href")+str_id_str;$(this).attr("href",a_href)})),$("body").hasClass("catalog-product-view")&&localStorage.getItem("jio_store_id")&&location.search.split("str_id=")[1]){$(".cart_details").html(""),$(".cart_details").attr("class","pickup_cart_details"),$(".pickup_cartbtn").detach().appendTo(".pickup_cart_details"),$(".pickup_cart_details").css("width","50%"),$("#cart_section .actions ").css("width","50%");var result,cart_prods=JSON.parse(localStorage.getItem("pickup_cart_info")).cart.lines;cart_prods.length>0?$("#pickup_counter").text(cart_prods.length).show():$("#pickup_counter").text("").hide()}var pincode,url_obj;(setTimeout((function(){$("#jiomart_fullpage_load").length>0&&$("#jiomart_fullpage_load").remove(),$("body").hasClass(".home_overflow_hidden")&&$("body").removeClass("home_overflow_hidden")}),200),localStorage.getItem("is_pickup_supported"))?"0"==localStorage.getItem("is_pickup_supported")?$(".delivery_store_pickup").hide():$(".delivery_store_pickup").show():get_available_stores(localStorage.getItem("nms_mgo_pincode"),!1);if("/store-pickup"==(new Url).path&&localStorage.getItem("jio_pickup_stores")){var data,stores=JSON.parse(localStorage.getItem("jio_pickup_stores")).stores;stores&&stores.length&&stores.length>0&&(storecode=stores[0].store_id,localStorage.setItem("jio_store_id",storecode),$("body").addClass("store-pickup"))}$("body").hasClass("cms-home")?localStorage.removeItem("jio_store_id"):$("#pickup_popup").modal({show:!1}),$("body").hasClass("cms-store-pickup")&&localStorage.getItem("is_pickup_supported")&&("0"==localStorage.getItem("is_pickup_supported")?$(".jiomart_maincontent").html('<div class="empty_listing"><img src="/assets/jiomsite/images/no_product_available.png"><h3>Stay Tuned</h3><p>No products are available for this pincode currently.</p></div>'):get_section_details(st_page))})),$("#select_store").click((function(){$("#pickup_popup").modal("show")})),$(document).on("click",".store_address_details",(function(){$("#pickup_popup").modal("show")})),$("#pickup_popup").on("shown.bs.modal",(function(){localStorage.removeItem("jio_pickup_formdata"),$("#pickup_pin").val(localStorage.getItem("nms_mgo_pincode")),$("#store_count,.pickup-swipe").show(),$("#pickup_pin_msg").text("");var data=[];localStorage.getItem("jio_pickup_stores")&&(data=JSON.parse(localStorage.getItem("jio_pickup_stores"))),bind_store_details(data,!1);var swiper=new Swiper(".pickup-swipe",{slidesPerView:"auto",spaceBetween:10,observer:!0,observeParents:!0,loop:!1,centeredSlides:!0})})),$(document).on("click","#store_box .swiper-slide",(function(){var store_id=$(this).attr("data-storeid");localStorage.setItem("jio_store_id",store_id),$(this).find(".store_id_rdo").prop("checked",!0),handlePickupFormSubmit(store_id)})),$(window).on("scroll",(function(){if($("body").hasClass("cms-store-pickup")&&"1"==localStorage.getItem("is_pickup_supported")&&$("#dynamic_page_load_more").length>0&&$(window).scrollTop()+$(window).height()>$(document).height()-100){var st_total_page=$("#dynamic_page_load_more").attr("data-pages");st_page<=st_total_page&&1==fetchMore&&(fetchMore=!1,$("#dynamic_page_load_more").append('<div class="jiomart_load"><div class="jiomart_loading">\n                        <div class="jiomart_loading_div">\n                            <div class="jiomart_loader"> &nbsp;</div>\n                        </div>\n                    </div></div>'),get_section_details(st_page),"undefined"!=typeof giftProductList&&giftProductList())}})),$(document).ready((function(){})),$(document).on("click","#store_pickup_lnk",(function(){if(localStorage.getItem("jio_store_id")){var str_id=localStorage.getItem("jio_store_id");window.location.href="/store-pickup/"+str_id}else{var pincode;if(!localStorage.getItem("jio_pickup_stores"))get_available_stores(pincode=localStorage.getItem("nms_mgo_pincode"),!1);if(localStorage.getItem("jio_pickup_stores")){var data,stores=JSON.parse(localStorage.getItem("jio_pickup_stores")).stores;if(stores&&stores.length&&stores.length>0){var str_id=stores[0].store_id;localStorage.setItem("jio_store_id",str_id);var pincode=localStorage.getItem("nms_mgo_pincode");get_inventory_code(pincode),window.location.href="/store-pickup/"+str_id}}}})),$(document).on("click",".pickup_cartbtn button",(function(){window.location.href="/checkout/cart"})),$(document).on("click tap",".store-pickup section a",(function(e){if($(this).closest("section").attr("data-tracker")&&!$(this).hasClass("clsviewall"))var nms_product_tracker=$(this).closest("section").attr("data-tracker");var dimension19="FALSE",dimension20=null,dimension18=null,dimension21="RRL",dimension22=!1;let productJson={};if(null!=nms_product_tracker&&null!=nms_product_tracker&&""!=nms_product_tracker){var custEmail=null!=localStorage.getItem("displayemail")?localStorage.getItem("displayemail"):"",custNew=null!=localStorage.getItem("new_customer")?localStorage.getItem("new_customer"):"",cityName=null!=localStorage.getItem("nms_mgo_city")?localStorage.getItem("nms_mgo_city").toUpperCase():"NA",pincode=null!=localStorage.getItem("nms_mgo_pincode")?localStorage.getItem("nms_mgo_pincode").toUpperCase():"NA",prod_url=$(this).attr("href"),cateTitle="Category List",mainCategory="",gtmStatus;if("1"==document.getElementById("gtm_status").value){"undefined"!=typeof journeyDataLayer&&journeyDataLayer(),cateTitle=nms_product_tracker;var data_vertical=null!=$(this).closest(".pro_items").find(".data-vertical").val()?$(this).closest(".pro_items").find(".data-vertical").val():"";if(null!=data_vertical&&(mainCategory=data_vertical),null!=$(this).closest(".pro_items").find(".data-cate").val()&&(mainCategory+="/"+$(this).closest(".pro_items").find(".data-cate").val()),null!=$(this).closest(".pro_items").find(".data-subcate").val()&&(mainCategory+="/"+$(this).closest(".pro_items").find(".data-subcate").val()),null!=$(this).closest(".pro_items").find(".data-sellername").val()&&(dimension21=$(this).closest(".pro_items").find(".data-sellername").val()),null!=$(this).closest(".pro_items").find(".data-3p-available").val()&&(dimension22=$(this).closest(".pro_items").find(".data-3p-available").val()),cateTitle&&(dimension18=cateTitle),$(this).closest(".pro_items").find("a:first").attr("data-objid")){var _dimension19="FALSE",objectData={};objectData[$(this).closest(".pro_items").find("a:first").attr("data-objid")]={dimension18:dimension18,dimension19:"FALSE",dimension20:null},""!=dimension21&&null!=dimension21&&"RIL"!=dimension21&&(objectData[$(this).closest(".pro_items").find("a:first").attr("data-objid")].dimension21=dimension21),""!=dimension22&&0!=dimension22&&null!=dimension22&&(objectData[$(this).closest(".pro_items").find("a:first").attr("data-objid")].dimension22="string"!=typeof dimension22||"1"!==dimension22||Boolean(parseInt(dimension22))),localStorage.setItem("nms_promo_tag",JSON.stringify(objectData))}productJson={name:$(this).closest(".pro_items").find("a:first").attr("title"),id:$(this).closest(".pro_items").find("a:first").attr("data-objid"),price:$(this).closest(".pro_items").find(".final_price").text().replace("₹","").trim(" "),brand:null!=$(this).closest(".pro_items").find(".data-manu").val()?$(this).closest(".pro_items").find(".data-manu").val():"",category:mainCategory,position:$($(this).closest("section").find(".pro_items")).index($(this).closest(".pro_items"))+1,dimension18:dimension18,dimension20:null,dimension19:"FALSE",dimension21:"RRL",dimension22:!1},""!=dimension21&&null!=dimension21&&"RIL"!=dimension21&&(productJson.dimension21=dimension21),""!=dimension22&&0!=dimension22&&null!=dimension22&&(productJson.dimension22="string"!=typeof dimension22||"1"!==dimension22||Boolean(parseInt(dimension22))),""!=user_id&&""!=custEmail?(dataLayer.push({ecommerce:null}),dataLayer.push({event:"ecom_productClick",journey:window.journeyData,ecommerce:{click:{actionField:{list:cateTitle},products:[productJson]}},customer:{isLoggedIn:!0,id:user_id,email:$.md5(custEmail),new_customer:custNew,city:cityName},eventCallback:function(){document.location=prod_url}})):(dataLayer.push({ecommerce:null}),dataLayer.push({event:"ecom_productClick",journey:window.journeyData,ecommerce:{click:{actionField:{list:cateTitle},products:[productJson]}},customer:{isLoggedIn:!1,city:cityName},eventCallback:function(){document.location=prod_url}}))}}})),$(document).on("click tap","section .pro_items a",(function(){var parentTitle=$(this).closest("section").attr("data-tracker");null!=parentTitle&&""!=parentTitle&&localStorage.setItem("nms_product_tracker",parentTitle)})),$(document).on("click tap","section .banner_box a span",(function(e){var bannerArray=[],page_url="";if("undefined"!=typeof journeyDataLayer&&journeyDataLayer(),$(this).length>0&&!$(this).find("img").hasClass("bannerTracker")){if($(this).closest(".home-item-info").find("img").hasClass("banner_img")&&$(this).length>0){var id="";$(this).closest(".ripple_effect").find("a").attr("href")&&(page_url=$(this).closest(".ripple_effect").find("a").attr("href")),$(this).closest(".ripple_effect").find("img").attr("id")&&(id=$(this).closest(".ripple_effect").find("img").attr("id").replace("rb_slide_","")),$(this).closest(".ripple_effect").find("img").attr("data-slideid")&&(id=$(this).closest(".ripple_effect").find("img").attr("data-slideid").replace("rb_slide_","")),$(this).closest("ins").attr("data-adspot-key")&&(id=$(this).closest("ins").attr("data-adspot-key")),$(this).closest(".home-item-info").attr("id")&&(id=$(this).closest(".home-item-info").attr("id"));var position="";$(this).closest("section").attr("id")&&(position=$(this).closest("section").attr("id").replace("section_","")),$(this).closest("section").attr("data-id")&&(position=$(this).closest("section").attr("data-id").replace("section_",""));var item_index=$($(this).closest("section").find(".ripple_effect")).index($(this).closest(".ripple_effect"))+1;bannerArray.push({id:id,name:null!=$(this).text()?$(this).text():"",creative:null!=$(this).closest(".banner_box").find("img")[0].clientWidth&&null!=$(this).closest(".banner_box").find("img")[0].clientHeight?$(this).closest(".banner_box").find("img")[0].clientWidth+"x"+$(this).closest(".banner_box").find("img")[0].clientHeight:"",position:position+"_"+item_index})}bannerArray.length>0&&(dataLayer.push({ecommerce:null}),dataLayer.push({event:"ecom_promotionClick",journey:window.journeyData,ecommerce:{promoClick:{promotions:bannerArray}},eventCallback:function(){null!=page_url&&""!=page_url&&(document.location=page_url)}}))}})),$("#pickup_pin").on("input",(function(event){var pincode=$(this).val();if(6==pincode.length){get_available_stores(pincode,!0);var data=[];localStorage.getItem("jio_pickup_formdata")&&(data=JSON.parse(localStorage.getItem("jio_pickup_formdata"))),bind_store_details(data,!0)}else $("#pickup_pin_msg").removeClass().html(""),$("#pickup_detect_location_msg").text("")})),$("#pickup_pin_form").submit((function(ev){ev.preventDefault();var pincode=$("#pickup_pin").val(),pinregex,valid;/^[0-9]{6}$/.test(pincode)&&handlePickupFormSubmit(0)}));